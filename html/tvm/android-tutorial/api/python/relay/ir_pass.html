

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tvm.relay.ir_pass &mdash; tvm 0.6.dev documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/tvm_theme.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="tvm.relay.module" href="module.html" />
    <link rel="prev" title="tvm.relay.image" href="image.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html">
          

          
            
            <img src="../../../_static/tvm-logo-small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.6.dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../install/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../vta/index.html">VTA: Deep Learning Accelerator Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../deploy/index.html">Deploy and Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contribute to TVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">Frequently Asked Questions</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../langref/index.html">Language Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Python API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../tvm.html">tvm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../intrin.html">tvm.intrin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tensor.html">tvm.tensor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../schedule.html">tvm.schedule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../target.html">tvm.target</a></li>
<li class="toctree-l2"><a class="reference internal" href="../build.html">tvm.build</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module.html">tvm.module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../error.html">tvm.error</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ndarray.html">tvm.ndarray</a></li>
<li class="toctree-l2"><a class="reference internal" href="../container.html">tvm.container</a></li>
<li class="toctree-l2"><a class="reference internal" href="../function.html">tvm.Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../autotvm.html">tvm.autotvm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../graph_runtime.html">tvm.contrib.graph_runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rpc.html">tvm.rpc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bridge.html">Framework Bridge APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contrib.html">Additional Contrib APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev.html">Developer API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topi.html">TOPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vta/index.html">VTA API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nnvm/index.html">NNVM API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hybrid.html">tvm.hybrid</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Relay API</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="backend.html">tvm.relay.backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="base.html">tvm.relay.base</a></li>
<li class="toctree-l3"><a class="reference internal" href="build_module.html">tvm.relay.build_module</a></li>
<li class="toctree-l3"><a class="reference internal" href="expr.html">tvm.relay.expr</a></li>
<li class="toctree-l3"><a class="reference internal" href="frontend.html">tvm.relay.frontend</a></li>
<li class="toctree-l3"><a class="reference internal" href="image.html">tvm.relay.image</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">tvm.relay.ir_pass</a></li>
<li class="toctree-l3"><a class="reference internal" href="module.html">tvm.relay.module</a></li>
<li class="toctree-l3"><a class="reference internal" href="nn.html">tvm.relay.nn</a></li>
<li class="toctree-l3"><a class="reference internal" href="op.html">tvm.relay.op</a></li>
<li class="toctree-l3"><a class="reference internal" href="scope_builder.html">tvm.relay.scope_builder</a></li>
<li class="toctree-l3"><a class="reference internal" href="ty.html">tvm.relay.ty</a></li>
<li class="toctree-l3"><a class="reference internal" href="vision.html">tvm.relay.vision</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../api_links.html">Links to API References</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/index.html">Design and Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nnvm_top.html">NNVM Core Tensor Operators</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../genindex.html">Index</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">tvm</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Python API</a> &raquo;</li>
        
          <li><a href="index.html">Relay API</a> &raquo;</li>
        
      <li>tvm.relay.ir_pass</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/api/python/relay/ir_pass.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-tvm.relay.ir_pass">
<span id="tvm-relay-ir-pass"></span><h1>tvm.relay.ir_pass<a class="headerlink" href="#module-tvm.relay.ir_pass" title="Permalink to this headline">¶</a></h1>
<p>This file contains:
1. The set of passes for Relay, which exposes an interface for configuring the</p>
<blockquote>
<div>passes and scripting them in Python.</div></blockquote>
<ol class="arabic simple" start="2">
<li>The pass manager for Relay which exposes different granularity of interfaces
for users to implement and use passes more conveniently.</li>
</ol>
<dl class="class">
<dt id="tvm.relay.ir_pass.FunctionPass">
<em class="property">class </em><code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">FunctionPass</code><a class="headerlink" href="#tvm.relay.ir_pass.FunctionPass" title="Permalink to this definition">¶</a></dt>
<dd><p>A pass that works on each tvm.relay.Function in a module. A function
pass class should be created through <cite>function_pass</cite>.</p>
</dd></dl>

<dl class="class">
<dt id="tvm.relay.ir_pass.ModulePass">
<em class="property">class </em><code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">ModulePass</code><a class="headerlink" href="#tvm.relay.ir_pass.ModulePass" title="Permalink to this definition">¶</a></dt>
<dd><p>A pass that works on tvm.relay.Module. Users don’t need to interact with
this class directly. Instead, a module pass should be created through
<cite>module_pass</cite>, because the design of the <cite>module_pass</cite> API is flexible
enough to handle the creation of a module pass in different manners. In
addition, all members of a module pass can be accessed from the base class.
The same rule applies to FunctionPass and SequentialPass as well.</p>
</dd></dl>

<dl class="class">
<dt id="tvm.relay.ir_pass.Pass">
<em class="property">class </em><code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">Pass</code><a class="headerlink" href="#tvm.relay.ir_pass.Pass" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class of all passes. All methods here are just simple wrappers
that are implemented in the backend. They are defined for users to
conveniently interact with the base class.</p>
<dl class="attribute">
<dt id="tvm.relay.ir_pass.Pass.info">
<code class="descname">info</code><a class="headerlink" href="#tvm.relay.ir_pass.Pass.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the pass meta.</p>
</dd></dl>

<dl class="method">
<dt id="tvm.relay.ir_pass.Pass.set_pass_context">
<code class="descname">set_pass_context</code><span class="sig-paren">(</span><em>pass_ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.Pass.set_pass_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Setup the pass context for analysis and optimizations. This context
could be shared by different passes for sequential passes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pass_ctx</strong> (<a class="reference internal" href="#tvm.relay.ir_pass.PassContext" title="tvm.relay.ir_pass.PassContext"><em>PassContext</em></a>) – The context that is used to help perform a certain pass or a series
of passes.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="tvm.relay.ir_pass.PassContext">
<em class="property">class </em><code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">PassContext</code><a class="headerlink" href="#tvm.relay.ir_pass.PassContext" title="Permalink to this definition">¶</a></dt>
<dd><p>The basis where a Relay optimization/analysis runs on.
Each pass context contains a number of auxiliary information that is used
to help an optimization pass. Such information includes the error reporter
to record the errors of during the optimization, etc.</p>
</dd></dl>

<dl class="class">
<dt id="tvm.relay.ir_pass.PassInfo">
<em class="property">class </em><code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">PassInfo</code><span class="sig-paren">(</span><em>name</em>, <em>opt_level</em>, <em>required=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.PassInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>The class that contains the meta data required by a pass. It is the
container of information needed by running an optimization or analysis.
This class can be extended by adding new members when more meta data is
needed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The pass name.</li>
<li><strong>opt_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The optimization level of this pass.</li>
<li><strong>required</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The list of passes that are required by a certain pass.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="tvm.relay.ir_pass.SequentialPass">
<em class="property">class </em><code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">SequentialPass</code><a class="headerlink" href="#tvm.relay.ir_pass.SequentialPass" title="Permalink to this definition">¶</a></dt>
<dd><p>A pass that works on a sequence of pass objects. A sequential pass class
should be created through <cite>sequential_pass</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.all_type_vars">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">all_type_vars</code><span class="sig-paren">(</span><em>expr</em>, <em>mod=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.all_type_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all type variables from expression/type e</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>expr</strong> (<em>Union</em><em>[</em><em>tvm.relay.Expr</em><em>,</em><em>tvm.relay.Type</em><em>]</em>) – The input expression/type</li>
<li><strong>mod</strong> (<em>tvm.relay.Module</em><em>, </em><em>optional</em>) – The global module</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>free</strong> – The list of all type variables in post-DFS order</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">List[tvm.relay.TypeVar]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.all_vars">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">all_vars</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.all_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all vars from expression expr in post-DFS order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>free</strong> – The list of all variables in post-DFS order.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">List[tvm.relay.Var]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.alpha_equal">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">alpha_equal</code><span class="sig-paren">(</span><em>lhs</em>, <em>rhs</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.alpha_equal" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare two Relay expr for structural equivalence (alpha equivalence).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>lhs</strong> (<em>tvm.relay.Expr</em>) – One of the input Expression.</li>
<li><strong>rhs</strong> (<em>tvm.relay.Expr</em>) – One of the input Expression.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>result</strong> – True iff lhs is alpha equal to rhs.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.alter_op_layout">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">alter_op_layout</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.alter_op_layout" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternate the layouts of operators or replace primitive operators with
other expressions.
This pass can be used for computing convolution in custom layouts or
other general weight pre-transformation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>transformed_expr</strong> – Transformed expression with alternated layout.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">tvm.relay.Expr</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.backward_fold_scale_axis">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">backward_fold_scale_axis</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.backward_fold_scale_axis" title="Permalink to this definition">¶</a></dt>
<dd><p>Backward fold axis scaling into weights of conv2d/dense.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression, we expect that expr’s types
should be fully inferred by infer_type.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>folded_expr</strong> – The folded expression after transformation.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">tvm.relay.Expr</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is recommended to call backward_fold_scale_axis
before using forward_fold_scale_axis.
As backward folding targets common conv-bn pattern.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.bound_type_vars">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">bound_type_vars</code><span class="sig-paren">(</span><em>expr</em>, <em>mod=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.bound_type_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Get bound type variables from expression/type e</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>expr</strong> (<em>Union</em><em>[</em><em>tvm.relay.Expr</em><em>,</em><em>tvm.relay.Type</em><em>]</em>) – The input expression/type</li>
<li><strong>mod</strong> (<em>tvm.relay.Module</em><em>, </em><em>optional</em>) – The global module</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>free</strong> – The list of bound type variables in post-DFS order</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">List[tvm.relay.TypeVar]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.bound_vars">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">bound_vars</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.bound_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Get bound vars from expression expr in post-DFS order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>free</strong> – The list of bound variables in post-DFS order.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">List[tvm.relay.Var]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.canonicalize_ops">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">canonicalize_ops</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.canonicalize_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>Canonicalize special operators to basic operators.
This can simplify latter analysis. (e.g. Expand bias_add to expand_dims and broadcast_add.)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>e</strong> (<em>tvm.relay.Expr</em>) – The input Expression</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>result</strong> – An expression without bias_add</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">tvm.relay.Expr</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.check_kind">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">check_kind</code><span class="sig-paren">(</span><em>t</em>, <em>mod=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.check_kind" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the type is well kinded and return the kind.
For example, this mean type cannot has tensor of tensor, or is a tuple type of 2 shapes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>t</strong> (<em>tvm.relay.Type</em>) – The type to check</li>
<li><strong>mod</strong> (<em>Optional</em><em>[</em><em>tvm.relay.Module</em><em>]</em>) – The global module.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>kind</strong> – the kind of t</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="ty.html#tvm.relay.ty.Kind" title="tvm.relay.ty.Kind">Kind</a></p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">check_kind</span><span class="p">(</span><span class="n">relay</span><span class="o">.</span><span class="n">TupleType</span><span class="p">([</span><span class="n">relay</span><span class="o">.</span><span class="n">TypeParam</span><span class="p">(</span><span class="s1">&#39;tp1&#39;</span><span class="p">,</span> <span class="n">relay</span><span class="o">.</span><span class="n">Kind</span><span class="o">.</span><span class="n">Shape</span><span class="p">)]))</span> <span class="o">==</span> <span class="n">Shape</span>
<span class="k">assert</span> <span class="n">check_kind</span><span class="p">(</span><span class="n">relay</span><span class="o">.</span><span class="n">TupleType</span><span class="p">([</span><span class="n">relay</span><span class="o">.</span><span class="n">TypeParam</span><span class="p">(</span><span class="s1">&#39;tp1&#39;</span><span class="p">,</span> <span class="n">relay</span><span class="o">.</span><span class="n">Kind</span><span class="o">.</span><span class="n">Type</span><span class="p">)]))</span> <span class="o">==</span> <span class="n">Type</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.collect_device_annotation_ops">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">collect_device_annotation_ops</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.collect_device_annotation_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect the device annotation ops for the given expression.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>ret</strong> – A dictionary mapping tvm.relay.Expr to device type where the keys are
annotation expressions.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Dict[tvm.relay.expr, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.collect_device_info">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">collect_device_info</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.collect_device_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect the device allocation map for the given expression. The device
ids are propagated from the <cite>device_copy</cite> operators.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>ret</strong> – A dictionary mapping tvm.relay.Expr to device type.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">Dict[tvm.relay.expr, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a>]</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.combine_parallel_conv2d">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">combine_parallel_conv2d</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.combine_parallel_conv2d" title="Permalink to this definition">¶</a></dt>
<dd><p>Fold multiple conv2d into one.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>transformed_expr</strong> – Transformed expression</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">tvm.relay.Expr</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.dead_code_elimination">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">dead_code_elimination</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.dead_code_elimination" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove expressions which does not effect the program result (dead code).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>e</strong> (<em>tvm.relay.Expr</em>) – The input Expression</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>result</strong> – An expression which is semantically equal to the input expression,
but with dead code removed.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">tvm.relay.Expr</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.eliminate_common_subexpr">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">eliminate_common_subexpr</code><span class="sig-paren">(</span><em>expr</em>, <em>fskip=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.eliminate_common_subexpr" title="Permalink to this definition">¶</a></dt>
<dd><p>Eliminate common subexpressions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression.</li>
<li><strong>fskip</strong> (<em>function</em>) – The callback function that decides whether an expression should be skipped.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>expr</strong> – The output expression.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tvm.relay.Expr</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.fold_constant">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">fold_constant</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.fold_constant" title="Permalink to this definition">¶</a></dt>
<dd><p>Fold the constant expression in expr.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>transformed_expr</strong> – The transformed expression.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">tvm.relay.Expr</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.forward_fold_scale_axis">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">forward_fold_scale_axis</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.forward_fold_scale_axis" title="Permalink to this definition">¶</a></dt>
<dd><p>Fold the scaling of axis into weights of conv2d/dense.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression, we expect that expr’s types
should be fully inferred by infer_type.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>folded_expr</strong> – The folded expression after transformation.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">tvm.relay.Expr</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is recommended to call backward_fold_scale_axis
before using forward_fold_scale_axis.
As backward folding targets common conv-bn pattern.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.free_type_vars">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">free_type_vars</code><span class="sig-paren">(</span><em>expr</em>, <em>mod=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.free_type_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Get free type variables from expression/type e</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>expr</strong> (<em>Union</em><em>[</em><em>tvm.relay.Expr</em><em>,</em><em>tvm.relay.Type</em><em>]</em>) – The input expression/type</li>
<li><strong>mod</strong> (<em>tvm.relay.Module</em><em>, </em><em>optional</em>) – The global module</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>free</strong> – The list of free type variables in post-DFS order</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">List[tvm.relay.TypeVar]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.free_vars">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">free_vars</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.free_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Get free Vars from expression expr in Post DFS order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>free</strong> – The list of free variables in post DFS order.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">List[tvm.relay.Var]</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The fact that Vars are post-DFS ordred are useful in
neural networks: usually this means weights of previous
are ordered first.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.function_pass">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">function_pass</code><span class="sig-paren">(</span><em>pass_func=None</em>, <em>opt_level=None</em>, <em>name=None</em>, <em>required=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.function_pass" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a function pass. This function returns a callback when pass_func
is provided. Otherwise, it returns the created function pass using the
given optimization function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pass_func</strong> (<em>Optional</em><em>[</em><em>Callable</em><em>[</em><em>(</em><em>Module/Function</em><em>, </em><a class="reference internal" href="#tvm.relay.ir_pass.PassContext" title="tvm.relay.ir_pass.PassContext"><em>PassContext</em></a><em>) </em><em>-&gt;</em>) – Module/Function]]
The implemented optimization pass.</li>
<li><strong>opt_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The optimization level of this module pass.</li>
<li><strong>name</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The name of the function pass. The name could be empty. In this case, the
name of the optimization function will be used as the pass name.</li>
<li><strong>required</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em><em>]</em>) – The list of passes that the module pass is dependent on.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>create_function_pass</strong> – The callable that will create a function pass is returned when
pass_func is not passed in. Otherwise, a FunctionPass object will be
created.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Union[Callable, <a class="reference internal" href="#tvm.relay.ir_pass.FunctionPass" title="tvm.relay.ir_pass.FunctionPass">FunctionPass</a>]</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<p>The following code creates a function level pass that performs constant
folding.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@relay.ir_pass.function_pass</span><span class="p">(</span><span class="n">opt_level</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">ir_pass</span><span class="o">.</span><span class="n">fold_constant</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>

<span class="n">function_pass</span> <span class="o">=</span> <span class="n">transform</span>
<span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">function_pass</span><span class="p">,</span> <span class="n">ir_pass</span><span class="o">.</span><span class="n">FunctionPass</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">function_pass</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">opt_level</span> <span class="o">==</span> <span class="mi">2</span>

<span class="c1"># Given a module m, the optimization could be invoked as the follwoing:</span>
<span class="n">updated_mod</span> <span class="o">=</span> <span class="n">function_pass</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="c1"># Now constant folding should have been applied to every function in</span>
<span class="c1"># the provided module m. And the updated module will be returned.</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.fuse_ops">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">fuse_ops</code><span class="sig-paren">(</span><em>expr</em>, <em>opt_level=1</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.fuse_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>Fuse operators in expr together.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression.</li>
<li><strong>opt_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The level of fuse optimization.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>transformed_expr</strong> – Transformed expression, containing fused result.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tvm.relay.Expr</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.get_total_mac_number">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">get_total_mac_number</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.get_total_mac_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of MACs (multiply-accumulate) of a model</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>ret</strong> – The number of MACs (multiply-accumulate) of a model</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">int64</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.gradient">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">gradient</code><span class="sig-paren">(</span><em>expr</em>, <em>mod=None</em>, <em>mode='higher_order'</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.gradient" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform the input function,
returning a function that calculate the original result,
paired with gradient of the input.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression, which is a Function or a GlobalVar.</li>
<li><strong>mod</strong> (<em>Optional</em><em>[</em><em>tvm.relay.Module</em><em>]</em>) – </li>
<li><strong>mode</strong> (<em>Optional</em><em>[</em><em>String</em><em>]</em>) – The mode of the automatic differentiation algorithm.
‘first_order’ only work on first order code, but will not produce reference nor closure.
‘higher_order’ work on all code using reference and closure.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>expr</strong> – The transformed expression.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tvm.relay.Expr</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.graph_equal">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">graph_equal</code><span class="sig-paren">(</span><em>lhs</em>, <em>rhs</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.graph_equal" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare two Relay expr for data-flow equivalence.
The difference between this and alpha-equality is that
variables are not expected to match between lhs and rhs;
they are treated as sources and are mapped between each other.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>lhs</strong> (<em>tvm.relay.Expr</em>) – One of the input Expression.</li>
<li><strong>rhs</strong> (<em>tvm.relay.Expr</em>) – One of the input Expression.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>result</strong> – True iff lhs is data-flow equivalent to rhs.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.infer_type">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">infer_type</code><span class="sig-paren">(</span><em>expr</em>, <em>mod=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.infer_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Infer the type of expr under the context of mod.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression.</li>
<li><strong>mod</strong> (<em>Optional</em><em>[</em><em>tvm.relay.Module</em><em>]</em>) – The global module.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>checked_expr</strong> – The checked expression.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tvm.relay.Expr</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.module_pass">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">module_pass</code><span class="sig-paren">(</span><em>pass_func=None</em>, <em>opt_level=None</em>, <em>name=None</em>, <em>required=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.module_pass" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a module pass. This function returns a callback when pass_func
is provided. Otherwise, it returns the created module level pass using the
given optimization function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pass_func</strong> (<em>Optional</em><em>[</em><em>Callable</em><em>[</em><em>(</em><em>Module/Function</em><em>, </em><a class="reference internal" href="#tvm.relay.ir_pass.PassContext" title="tvm.relay.ir_pass.PassContext"><em>PassContext</em></a><em>) </em><em>-&gt;</em>) – Module/Function]]
The implemented optimization pass.</li>
<li><strong>opt_level</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The optimization level of this module pass.</li>
<li><strong>name</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The name of the module pass. The name could be empty. In this case, the
name of the optimization function will be used as the pass name.</li>
<li><strong>required</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em><em>]</em>) – The list of passes that the module pass is dependent on.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><p class="first"><strong>create_module_pass</strong> (<em>Union[Callable, ModulePass]</em>) – The callable that will create a module pass is returned when
pass_func is not passed in. Otherwise, a ModulePass object will be
directly created.</p>
<p>Examples</p>
</li>
<li><p class="first"><em>——–</em></p>
</li>
<li><p class="first"><em>The following code creates a module level pass and adds an abs function to</em></p>
</li>
<li><p class="first"><em>the module.</em></p>
</li>
<li><p class="first"><em>.. code-block:: python</em> – &#64;relay.ir_pass.module_pass(opt_level=2)
def transform(mod, ctx):</p>
<blockquote>
<div><p>tp = relay.TensorType((10,), “float32”)
x = relay.var(“x”, tp)
gv = relay.GlobalVar(“var”)
func = relay.Function([x], relay.abs(x))
new_mod = relay.Module({gv: func})
new_mod.update(mod)
return new_mod</p>
</div></blockquote>
<p>module_pass = transform
assert isinstance(module_pass, ir_pass.ModulePass)
assert module_pass.info.opt_level == 2</p>
<p># Given a module m, the optimization could be invoked as the follwoing:
updated_mod = module_pass(m)
# Now a function abs should be added to the module m.</p>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.pass_debug_print">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">pass_debug_print</code><span class="sig-paren">(</span><em>ast</em>, <em>show_meta_data=True</em>, <em>annotate=None</em>, <em>gnf=True</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.pass_debug_print" title="Permalink to this definition">¶</a></dt>
<dd><p>THIS SHOULD BE USED ONLY FOR DEBUGGING, NOT AS AN INTERCHANGE FORMAT!
USE <cite>.astext()</cite> INSTEAD!</p>
<p>A version of the pretty printer intended for debugging passes. Contains
advanced printing options.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ast</strong> (<em>Union</em><em>[</em><em>relay.Expr</em><em>, </em><em>relay.Module</em><em>, </em><em>relay.Type</em><em>]</em>) – The relay fragment to be turned into text.</li>
<li><strong>show_meta_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to include meta data section in the text
if there is meta data.</li>
<li><strong>annotate</strong> (<em>Optional</em><em>[</em><em>relay.Expr-&gt;str</em><em>]</em>) – Optional annotate function to provide additional
information in the comment block.</li>
<li><strong>gnf</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether to print in GNF. If it is disabled, pointers are left implicit.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>text</strong> – A text representation of <cite>ast</cite>.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.post_order_visit">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">post_order_visit</code><span class="sig-paren">(</span><em>expr</em>, <em>fvisit</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.post_order_visit" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively visit the ir in post DFS order node,
apply fvisit. Each node is guaranteed to be visited
only once.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression.</li>
<li><strong>fvisit</strong> (<em>function</em>) – The visitor function to be applied.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.rewrite_annotated_ops">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">rewrite_annotated_ops</code><span class="sig-paren">(</span><em>expr</em>, <em>fallback_device</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.rewrite_annotated_ops" title="Permalink to this definition">¶</a></dt>
<dd><p>Rewrite the annotated program where annotation operators, e.g.
<cite>on_deivce</cite>, mark which device an expression should be scheduled to.
This pass helps heterogeneous execution where different operators may need
to be allocated on various devices.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression.</li>
<li><strong>fallback_device</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – The fallback device type. It is also used as the default device for
operators with no annotated device.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>transformed_expr</strong> – Transformed expression with cross device data copy operators.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tvm.relay.Expr</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.sequential_pass">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">sequential_pass</code><span class="sig-paren">(</span><em>passes=None</em>, <em>opt_level=2</em>, <em>name='sequential_pass'</em>, <em>required=None</em>, <em>disabled=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.sequential_pass" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a sequential pass using a defined optimization function from
Python. Some typical usage of the sequential pass are:
1. Users provide a list of passes for optimization.
2. Only an optimization level is provided so that the backend system has</p>
<blockquote>
<div>to glob all passes at this level and below to perform the optimizations.</div></blockquote>
<p>Note that users can also provide a series of passes that they don’t want to
apply when running a sequential pass. Pass dependency will be resolved in
the backend as well.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>passes</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><a class="reference internal" href="#tvm.relay.ir_pass.Pass" title="tvm.relay.ir_pass.Pass"><em>Pass</em></a><em>]</em><em>]</em>) – A sequence of passes candidate for optimization.</li>
<li><strong>opt_level</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a><em>]</em>) – The optimization level of this sequential pass.</li>
<li><strong>name</strong> (<em>Optional</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em>) – The name of the sequential pass.</li>
<li><strong>required</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em><em>]</em>) – The list of passes that the sequential pass is dependent on.</li>
<li><strong>disabled</strong> (<em>Optional</em><em>[</em><em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em>]</em><em>]</em>) – A list of disabled passes.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>ret</strong> – A sequential pass built through pass_func.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#tvm.relay.ir_pass.Pass" title="tvm.relay.ir_pass.Pass">Pass</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.simplify_inference">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">simplify_inference</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.simplify_inference" title="Permalink to this definition">¶</a></dt>
<dd><p>Simplify the data-flow graph for inference phase.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>e</strong> (<em>tvm.relay.Expr</em>) – The input Expression</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>result</strong> – An expression which is semantically equal to the input expression,
but with some simplification</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">tvm.relay.Expr</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.structural_hash">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">structural_hash</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.structural_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Hash a Relay expression structurally.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>tvm.relay.Expr</em><em> or </em><em>tvm.relay.Type</em>) – The expression to hash.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>result</strong> – The hash value</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.to_a_normal_form">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">to_a_normal_form</code><span class="sig-paren">(</span><em>expr</em>, <em>mod=None</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.to_a_normal_form" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn Graph Normal Form expression into A Normal Form Expression.</p>
<p>The scope of the root expression is the global scope.</p>
<p>The scope of any non root expression is the least common ancestor of all it’s scope.</p>
<p>Values are ordered by post-DFS order in each scope.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression.</li>
<li><strong>mod</strong> (<em>Optional</em><em>[</em><em>tvm.relay.Module</em><em>]</em>) – The global module.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>expr</strong> – The output expression.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tvm.relay.Expr</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.to_graph_normal_form">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">to_graph_normal_form</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.to_graph_normal_form" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn A Normal Form expression into Graph Normal Form expression
:param expr: The input expression
:type expr: tvm.relay.Expr</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>expr</strong> – The output expression</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">tvm.relay.Expr</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tvm.relay.ir_pass.well_formed">
<code class="descclassname">tvm.relay.ir_pass.</code><code class="descname">well_formed</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="headerlink" href="#tvm.relay.ir_pass.well_formed" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that each Var is only bound once (well formed).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>expr</strong> (<em>tvm.relay.Expr</em>) – The input expression</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>well_form</strong> – Whether the input expression is well formed</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)">bool</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="module.html" class="btn btn-neutral float-right" title="tvm.relay.module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="image.html" class="btn btn-neutral float-left" title="tvm.relay.image" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, tvm developers

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-75982049-2', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>