<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>tvm: vta/include/vta/runtime.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tvm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_441ca41fa287511eb63503be82b356bc.html">vta</a></li><li class="navelem"><a class="el" href="dir_d557853bfb5863d65dcd6b231105ecfd.html">include</a></li><li class="navelem"><a class="el" href="dir_70bf7879dbff95c3daf56672a903d5a0.html">vta</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">runtime.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>VTA runtime library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="c__runtime__api_8h_source.html">tvm/runtime/c_runtime_api.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="driver_8h_source.html">driver.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for runtime.h:</div>
<div class="dyncontent">
<div class="center"><img src="runtime_8h__incl.png" border="0" usemap="#vta_2include_2vta_2runtime_8h" alt=""/></div>
<map name="vta_2include_2vta_2runtime_8h" id="vta_2include_2vta_2runtime_8h">
<area shape="rect" id="node2" href="c__runtime__api_8h.html" title="TVM runtime library. " alt="" coords="102,80,271,121"/>
<area shape="rect" id="node6" href="driver_8h.html" title="Driver interface that is used by runtime. " alt="" coords="296,87,365,114"/>
</map>
</div>
</div>
<p><a href="runtime_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0dd38075d19fad5090718fdf6bf57a75"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a0dd38075d19fad5090718fdf6bf57a75">VTA_MEMCPY_H2D</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a0dd38075d19fad5090718fdf6bf57a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a075e2abd7869a5e2223950983f18e64c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a075e2abd7869a5e2223950983f18e64c">VTA_MEMCPY_D2H</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a075e2abd7869a5e2223950983f18e64c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a233882baf88e87b68e68b04b88695d01"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a233882baf88e87b68e68b04b88695d01">VTA_MEMCPY_D2D</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a233882baf88e87b68e68b04b88695d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc780465c7de496a91ae76d1ae2e0015"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#adc780465c7de496a91ae76d1ae2e0015">VTA_DEBUG_DUMP_INSN</a>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr class="separator:adc780465c7de496a91ae76d1ae2e0015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada971ee615831eb85f04fab462f83c31"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#ada971ee615831eb85f04fab462f83c31">VTA_DEBUG_DUMP_UOP</a>&#160;&#160;&#160;(1 &lt;&lt; 2)</td></tr>
<tr class="separator:ada971ee615831eb85f04fab462f83c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9c4ad7b01f7c0cff49c95617ee48a2a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#aa9c4ad7b01f7c0cff49c95617ee48a2a">VTA_DEBUG_SKIP_READ_BARRIER</a>&#160;&#160;&#160;(1 &lt;&lt; 3)</td></tr>
<tr class="separator:aa9c4ad7b01f7c0cff49c95617ee48a2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2771c07202a15918503cbf41f9abe7ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a2771c07202a15918503cbf41f9abe7ef">VTA_DEBUG_SKIP_WRITE_BARRIER</a>&#160;&#160;&#160;(1 &lt;&lt; 4)</td></tr>
<tr class="separator:a2771c07202a15918503cbf41f9abe7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8026bd3a0f00ef72dbc15d73a794a9a5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a8026bd3a0f00ef72dbc15d73a794a9a5">VTA_DEBUG_FORCE_SERIAL</a>&#160;&#160;&#160;(1 &lt;&lt; 5)</td></tr>
<tr class="separator:a8026bd3a0f00ef72dbc15d73a794a9a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a2e3faa14b1dcf7821997a901f2fefd81"><td class="memItemLeft" align="right" valign="top">typedef void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a></td></tr>
<tr class="memdesc:a2e3faa14b1dcf7821997a901f2fefd81"><td class="mdescLeft">&#160;</td><td class="mdescRight">VTA command handle.  <a href="#a2e3faa14b1dcf7821997a901f2fefd81">More...</a><br /></td></tr>
<tr class="separator:a2e3faa14b1dcf7821997a901f2fefd81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae1c49e1a97ef14bbbf84bfafff20556b"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#ae1c49e1a97ef14bbbf84bfafff20556b">VTABufferAlloc</a> (size_t size)</td></tr>
<tr class="memdesc:ae1c49e1a97ef14bbbf84bfafff20556b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate data buffer.  <a href="#ae1c49e1a97ef14bbbf84bfafff20556b">More...</a><br /></td></tr>
<tr class="separator:ae1c49e1a97ef14bbbf84bfafff20556b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30a81e8ca8863a33a4df327bc9a29e70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a30a81e8ca8863a33a4df327bc9a29e70">VTABufferFree</a> (void *buffer)</td></tr>
<tr class="memdesc:a30a81e8ca8863a33a4df327bc9a29e70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free data buffer.  <a href="#a30a81e8ca8863a33a4df327bc9a29e70">More...</a><br /></td></tr>
<tr class="separator:a30a81e8ca8863a33a4df327bc9a29e70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a134a27f04986b4f1f8f4883dfd38c297"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a134a27f04986b4f1f8f4883dfd38c297">VTABufferCopy</a> (const void *from, size_t from_offset, void *to, size_t to_offset, size_t size, int kind_mask)</td></tr>
<tr class="memdesc:a134a27f04986b4f1f8f4883dfd38c297"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy data buffer from one location to another.  <a href="#a134a27f04986b4f1f8f4883dfd38c297">More...</a><br /></td></tr>
<tr class="separator:a134a27f04986b4f1f8f4883dfd38c297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af147888a88c60a4efe52ac4850dfcbb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#af147888a88c60a4efe52ac4850dfcbb7">VTARuntimeShutdown</a> ()</td></tr>
<tr class="memdesc:af147888a88c60a4efe52ac4850dfcbb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdown hook of VTA to cleanup resources.  <a href="#af147888a88c60a4efe52ac4850dfcbb7">More...</a><br /></td></tr>
<tr class="separator:af147888a88c60a4efe52ac4850dfcbb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b1b0d4f6a181b4e10e6b671598cd635"><td class="memItemLeft" align="right" valign="top"><a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a9b1b0d4f6a181b4e10e6b671598cd635">VTATLSCommandHandle</a> ()</td></tr>
<tr class="memdesc:a9b1b0d4f6a181b4e10e6b671598cd635"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get thread local command handle.  <a href="#a9b1b0d4f6a181b4e10e6b671598cd635">More...</a><br /></td></tr>
<tr class="separator:a9b1b0d4f6a181b4e10e6b671598cd635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade80defadaf25acf30545e296244dc3d"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#ade80defadaf25acf30545e296244dc3d">VTABufferCPUPtr</a> (<a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a> cmd, void *buffer)</td></tr>
<tr class="memdesc:ade80defadaf25acf30545e296244dc3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the buffer access pointer on CPU.  <a href="#ade80defadaf25acf30545e296244dc3d">More...</a><br /></td></tr>
<tr class="separator:ade80defadaf25acf30545e296244dc3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7819fd6126be410beb563cdc2af0de40"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a7819fd6126be410beb563cdc2af0de40">VTAWriteBarrier</a> (<a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a> cmd, void *buffer, uint32_t elem_bits, uint32_t start, uint32_t extent)</td></tr>
<tr class="memdesc:a7819fd6126be410beb563cdc2af0de40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a write barrier to make a memory region visible to the CPU.  <a href="#a7819fd6126be410beb563cdc2af0de40">More...</a><br /></td></tr>
<tr class="separator:a7819fd6126be410beb563cdc2af0de40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93449f636c4755d22183ec05ba5cc991"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a93449f636c4755d22183ec05ba5cc991">VTAReadBarrier</a> (<a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a> cmd, void *buffer, uint32_t elem_bits, uint32_t start, uint32_t extent)</td></tr>
<tr class="memdesc:a93449f636c4755d22183ec05ba5cc991"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a read barrier to a memory region visible to VTA.  <a href="#a93449f636c4755d22183ec05ba5cc991">More...</a><br /></td></tr>
<tr class="separator:a93449f636c4755d22183ec05ba5cc991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebdf611f85e3af082231c5eee491407b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#aebdf611f85e3af082231c5eee491407b">VTASetDebugMode</a> (<a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a> cmd, int debug_flag)</td></tr>
<tr class="memdesc:aebdf611f85e3af082231c5eee491407b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set debug mode on the command handle.  <a href="#aebdf611f85e3af082231c5eee491407b">More...</a><br /></td></tr>
<tr class="separator:aebdf611f85e3af082231c5eee491407b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa232ad889cf3b812b2039dea7c20e459"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#aa232ad889cf3b812b2039dea7c20e459">VTALoadBuffer2D</a> (<a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a> cmd, void *src_dram_addr, uint32_t src_elem_offset, uint32_t x_size, uint32_t y_size, uint32_t x_stride, uint32_t x_pad_before, uint32_t y_pad_before, uint32_t x_pad_after, uint32_t y_pad_after, uint32_t dst_sram_index, uint32_t dst_memory_type)</td></tr>
<tr class="memdesc:aa232ad889cf3b812b2039dea7c20e459"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a 2D data load from DRAM. Sizes are measured in units of vector elements.  <a href="#aa232ad889cf3b812b2039dea7c20e459">More...</a><br /></td></tr>
<tr class="separator:aa232ad889cf3b812b2039dea7c20e459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf7d329f87cfc8a625cbbf49f4a82fc2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#adf7d329f87cfc8a625cbbf49f4a82fc2">VTAStoreBuffer2D</a> (<a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a> cmd, uint32_t src_sram_index, uint32_t src_memory_type, void *dst_dram_addr, uint32_t dst_elem_offset, uint32_t x_size, uint32_t y_size, uint32_t x_stride)</td></tr>
<tr class="memdesc:adf7d329f87cfc8a625cbbf49f4a82fc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform a 2D data store into DRAM Sizes are measured in units of vector elements.  <a href="#adf7d329f87cfc8a625cbbf49f4a82fc2">More...</a><br /></td></tr>
<tr class="separator:adf7d329f87cfc8a625cbbf49f4a82fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bceab34cf417b70e2bbc43d646d73fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a4bceab34cf417b70e2bbc43d646d73fe">VTAUopPush</a> (uint32_t mode, uint32_t reset_out, uint32_t dst_index, uint32_t src_index, uint32_t wgt_index, uint32_t opcode, uint32_t use_imm, int32_t imm_val)</td></tr>
<tr class="memdesc:a4bceab34cf417b70e2bbc43d646d73fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push uop into kernel buffer. In GEMM mode, do a blocked GEMM with 2d access pattern. In ALU mode, do a vectorized ALU operation with 2d access pattern.  <a href="#a4bceab34cf417b70e2bbc43d646d73fe">More...</a><br /></td></tr>
<tr class="separator:a4bceab34cf417b70e2bbc43d646d73fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0384711bc005be7c66e8ac5dda42ad0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#ae0384711bc005be7c66e8ac5dda42ad0">VTAUopLoopBegin</a> (uint32_t extent, uint32_t dst_factor, uint32_t src_factor, uint32_t wgt_factor)</td></tr>
<tr class="memdesc:ae0384711bc005be7c66e8ac5dda42ad0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark start of a micro op loop.  <a href="#ae0384711bc005be7c66e8ac5dda42ad0">More...</a><br /></td></tr>
<tr class="separator:ae0384711bc005be7c66e8ac5dda42ad0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e92d336d3467b421304a29a218016d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a2e92d336d3467b421304a29a218016d1">VTAUopLoopEnd</a> ()</td></tr>
<tr class="memdesc:a2e92d336d3467b421304a29a218016d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark end of a micro op loop.  <a href="#a2e92d336d3467b421304a29a218016d1">More...</a><br /></td></tr>
<tr class="separator:a2e92d336d3467b421304a29a218016d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ceafe2b295471779cc142b43dd45753"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a2ceafe2b295471779cc142b43dd45753">VTAPushGEMMOp</a> (void **uop_handle, int(*finit)(void *), void *signature, int nbytes)</td></tr>
<tr class="memdesc:a2ceafe2b295471779cc142b43dd45753"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push GEMM uop kernel into the command handle.  <a href="#a2ceafe2b295471779cc142b43dd45753">More...</a><br /></td></tr>
<tr class="separator:a2ceafe2b295471779cc142b43dd45753"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32fe284e762627335d334bc8a48894b4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a32fe284e762627335d334bc8a48894b4">VTAPushALUOp</a> (void **uop_handle, int(*finit)(void *), void *signature, int nbytes)</td></tr>
<tr class="memdesc:a32fe284e762627335d334bc8a48894b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push ALU uop kernel into the command handle.  <a href="#a32fe284e762627335d334bc8a48894b4">More...</a><br /></td></tr>
<tr class="separator:a32fe284e762627335d334bc8a48894b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37df978a280b1b0c6d55edbde690db6d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a37df978a280b1b0c6d55edbde690db6d">VTADepPush</a> (<a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a> cmd, int from_qid, int to_qid)</td></tr>
<tr class="memdesc:a37df978a280b1b0c6d55edbde690db6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push dependence token.  <a href="#a37df978a280b1b0c6d55edbde690db6d">More...</a><br /></td></tr>
<tr class="separator:a37df978a280b1b0c6d55edbde690db6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add9e46a57a658ffbd1cb9ba803a7e03a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#add9e46a57a658ffbd1cb9ba803a7e03a">VTADepPop</a> (<a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a> cmd, int from_qid, int to_qid)</td></tr>
<tr class="memdesc:add9e46a57a658ffbd1cb9ba803a7e03a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pop dependence signal.  <a href="#add9e46a57a658ffbd1cb9ba803a7e03a">More...</a><br /></td></tr>
<tr class="separator:add9e46a57a658ffbd1cb9ba803a7e03a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a81d3f931b0f072f6bb4d44c9d33d26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="runtime_8h.html#a8a81d3f931b0f072f6bb4d44c9d33d26">VTASynchronize</a> (<a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a> cmd, uint32_t wait_cycles)</td></tr>
<tr class="memdesc:a8a81d3f931b0f072f6bb4d44c9d33d26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize the command handle. Commit all the instructions to VTA and wait until the accelerator finishes its job. Perform all of the out-of-order DRAM stores.  <a href="#a8a81d3f931b0f072f6bb4d44c9d33d26">More...</a><br /></td></tr>
<tr class="separator:a8a81d3f931b0f072f6bb4d44c9d33d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>VTA runtime library. </p>
<p>Copyright (c) 2018 by Contributors </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="adc780465c7de496a91ae76d1ae2e0015"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VTA_DEBUG_DUMP_INSN&#160;&#160;&#160;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ada971ee615831eb85f04fab462f83c31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VTA_DEBUG_DUMP_UOP&#160;&#160;&#160;(1 &lt;&lt; 2)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a8026bd3a0f00ef72dbc15d73a794a9a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VTA_DEBUG_FORCE_SERIAL&#160;&#160;&#160;(1 &lt;&lt; 5)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aa9c4ad7b01f7c0cff49c95617ee48a2a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VTA_DEBUG_SKIP_READ_BARRIER&#160;&#160;&#160;(1 &lt;&lt; 3)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2771c07202a15918503cbf41f9abe7ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VTA_DEBUG_SKIP_WRITE_BARRIER&#160;&#160;&#160;(1 &lt;&lt; 4)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a233882baf88e87b68e68b04b88695d01"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VTA_MEMCPY_D2D&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a075e2abd7869a5e2223950983f18e64c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VTA_MEMCPY_D2H&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0dd38075d19fad5090718fdf6bf57a75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VTA_MEMCPY_H2D&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a2e3faa14b1dcf7821997a901f2fefd81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void* <a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>VTA command handle. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae1c49e1a97ef14bbbf84bfafff20556b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* VTABufferAlloc </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate data buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>Buffer size. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the allocated buffer. </dd></dl>

</div>
</div>
<a class="anchor" id="a134a27f04986b4f1f8f4883dfd38c297"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VTABufferCopy </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>from_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>to_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>kind_mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy data buffer from one location to another. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">from</td><td>The source buffer base address. </td></tr>
    <tr><td class="paramname">from_offset</td><td>The offset of the source buffer. </td></tr>
    <tr><td class="paramname">to</td><td>The target buffer base address. </td></tr>
    <tr><td class="paramname">to_offset</td><td>The offset of the target buffer. </td></tr>
    <tr><td class="paramname">size</td><td>Size of copy. </td></tr>
    <tr><td class="paramname">kind_mask</td><td>The memory copy kind. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ade80defadaf25acf30545e296244dc3d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* VTABufferCPUPtr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a>&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the buffer access pointer on CPU. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>The VTA command handle. </td></tr>
    <tr><td class="paramname">buffer</td><td>The data buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The pointer that can be accessed by the CPU. </dd></dl>

</div>
</div>
<a class="anchor" id="a30a81e8ca8863a33a4df327bc9a29e70"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VTABufferFree </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free data buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The data buffer to be freed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="add9e46a57a658ffbd1cb9ba803a7e03a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int VTADepPop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a>&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>from_qid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>to_qid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pop dependence signal. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>The VTA command handle. </td></tr>
    <tr><td class="paramname">from_qid</td><td>The source queue. </td></tr>
    <tr><td class="paramname">to_qid</td><td>The destination queue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success. </dd></dl>

</div>
</div>
<a class="anchor" id="a37df978a280b1b0c6d55edbde690db6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int VTADepPush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a>&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>from_qid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>to_qid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Push dependence token. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>The VTA command handle. </td></tr>
    <tr><td class="paramname">from_qid</td><td>The source queue. </td></tr>
    <tr><td class="paramname">to_qid</td><td>The destination queue. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success. </dd></dl>

</div>
</div>
<a class="anchor" id="aa232ad889cf3b812b2039dea7c20e459"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VTALoadBuffer2D </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a>&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>src_dram_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>src_elem_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>x_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>y_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>x_stride</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>x_pad_before</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>y_pad_before</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>x_pad_after</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>y_pad_after</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dst_sram_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dst_memory_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform a 2D data load from DRAM. Sizes are measured in units of vector elements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>The VTA command handle. </td></tr>
    <tr><td class="paramname">src_dram_addr</td><td>Source DRAM address. </td></tr>
    <tr><td class="paramname">src_elem_offset</td><td>The source DRAM offset in number of unit elements. </td></tr>
    <tr><td class="paramname">x_size</td><td>The lowest dimension (x axis) size in number of unit elements. </td></tr>
    <tr><td class="paramname">y_size</td><td>The number of rows (y axis). </td></tr>
    <tr><td class="paramname">x_stride</td><td>The x axis stride. </td></tr>
    <tr><td class="paramname">x_pad_before</td><td>The start padding on x axis. </td></tr>
    <tr><td class="paramname">y_pad_before</td><td>The start padding on y axis. </td></tr>
    <tr><td class="paramname">x_pad_after</td><td>The end padding on x axis. </td></tr>
    <tr><td class="paramname">y_pad_after</td><td>The end padding of y axis. </td></tr>
    <tr><td class="paramname">dst_sram_index</td><td>Destination SRAM index. </td></tr>
    <tr><td class="paramname">dst_memory_type</td><td>Destination memory type. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a32fe284e762627335d334bc8a48894b4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int VTAPushALUOp </td>
          <td>(</td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>uop_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(void *)&#160;</td>
          <td class="paramname"><em>finit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>signature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nbytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Push ALU uop kernel into the command handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uop_handle</td><td>The uop cache handle. </td></tr>
    <tr><td class="paramname">finit</td><td>The initalization function to initialize uop. </td></tr>
    <tr><td class="paramname">signature</td><td>The closure arguments of the finit. </td></tr>
    <tr><td class="paramname">nbytes</td><td>Number of bytes to in the closure arguments. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success. </dd></dl>

</div>
</div>
<a class="anchor" id="a2ceafe2b295471779cc142b43dd45753"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int VTAPushGEMMOp </td>
          <td>(</td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>uop_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(void *)&#160;</td>
          <td class="paramname"><em>finit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>signature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nbytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Push GEMM uop kernel into the command handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uop_handle</td><td>The uop cache handle. </td></tr>
    <tr><td class="paramname">finit</td><td>The initalization function to initialize uop. </td></tr>
    <tr><td class="paramname">signature</td><td>The closure arguments of the finit. </td></tr>
    <tr><td class="paramname">nbytes</td><td>Number of bytes to in the closure arguments. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success. </dd></dl>

</div>
</div>
<a class="anchor" id="a93449f636c4755d22183ec05ba5cc991"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VTAReadBarrier </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a>&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>elem_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>extent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform a read barrier to a memory region visible to VTA. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>The VTA command handle. </td></tr>
    <tr><td class="paramname">buffer</td><td>The head buffer pointer. </td></tr>
    <tr><td class="paramname">elem_bits</td><td>The unit bits of each elements. </td></tr>
    <tr><td class="paramname">start</td><td>The start of the region (in elements). </td></tr>
    <tr><td class="paramname">extent</td><td>The end of the region (in elements). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af147888a88c60a4efe52ac4850dfcbb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VTARuntimeShutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shutdown hook of VTA to cleanup resources. </p>

</div>
</div>
<a class="anchor" id="aebdf611f85e3af082231c5eee491407b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VTASetDebugMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a>&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>debug_flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set debug mode on the command handle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>The VTA command handle. </td></tr>
    <tr><td class="paramname">debug_flag</td><td>The debug flag. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="adf7d329f87cfc8a625cbbf49f4a82fc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VTAStoreBuffer2D </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a>&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>src_sram_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>src_memory_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dst_dram_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dst_elem_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>x_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>y_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>x_stride</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform a 2D data store into DRAM Sizes are measured in units of vector elements. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>The VTA command handle. </td></tr>
    <tr><td class="paramname">src_sram_index</td><td>Source SRAM index. </td></tr>
    <tr><td class="paramname">src_memory_type</td><td>Source memory type. </td></tr>
    <tr><td class="paramname">dst_dram_addr</td><td>Destination DRAM address. </td></tr>
    <tr><td class="paramname">dst_elem_offset</td><td>The destination DRAM offset in number of unit elements. </td></tr>
    <tr><td class="paramname">x_size</td><td>The lowest dimension (x axis) size in number of unit elements. </td></tr>
    <tr><td class="paramname">y_size</td><td>The number of rows. </td></tr>
    <tr><td class="paramname">x_stride</td><td>The x axis stride. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8a81d3f931b0f072f6bb4d44c9d33d26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VTASynchronize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a>&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>wait_cycles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronize the command handle. Commit all the instructions to VTA and wait until the accelerator finishes its job. Perform all of the out-of-order DRAM stores. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>The VTA command handle. </td></tr>
    <tr><td class="paramname">wait_cycles</td><td>The limit of poll cycles. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a9b1b0d4f6a181b4e10e6b671598cd635"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a> VTATLSCommandHandle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get thread local command handle. </p>
<dl class="section return"><dt>Returns</dt><dd>A thread local command handle. </dd></dl>

</div>
</div>
<a class="anchor" id="ae0384711bc005be7c66e8ac5dda42ad0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VTAUopLoopBegin </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>extent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dst_factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>src_factor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>wgt_factor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark start of a micro op loop. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">extent</td><td>The extent of the loop. </td></tr>
    <tr><td class="paramname">dst_factor</td><td>The accum factor. </td></tr>
    <tr><td class="paramname">src_factor</td><td>The input factor. </td></tr>
    <tr><td class="paramname">wgt_factor</td><td>The weight factor. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2e92d336d3467b421304a29a218016d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VTAUopLoopEnd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark end of a micro op loop. </p>

</div>
</div>
<a class="anchor" id="a4bceab34cf417b70e2bbc43d646d73fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VTAUopPush </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>reset_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dst_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>src_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>wgt_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>opcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>use_imm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>imm_val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Push uop into kernel buffer. In GEMM mode, do a blocked GEMM with 2d access pattern. In ALU mode, do a vectorized ALU operation with 2d access pattern. </p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;DType accum[INP_BUFF_DEPTH][l][n];</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;DType weight[WGT_BUFF_DEPTH][n][m];</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;DType input[INP_BUFF_DEPTH][l][m];</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;if reset_out == 1</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160; accum[dst_index] = 0</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;elif mode == 0</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; accum[dst_index] += GEMM(input[src_index], weight[wgt_index]);</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;else</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160; if (use_imm)</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;   accum[dst_index] = opcode(accum[dst_index], imm_val);</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; else</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;   accum[dst_index] = opcode(accum[dst_index], accum[src_index]);</div></div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>Set to GEMM mode if set to 0, ALU mode is set to 1. </td></tr>
    <tr><td class="paramname">reset_out</td><td>Resets the accum to 0. </td></tr>
    <tr><td class="paramname">dst_index</td><td>The accum memory index. </td></tr>
    <tr><td class="paramname">src_index</td><td>The input memory (gemm) / accum memory (alu) index. </td></tr>
    <tr><td class="paramname">wgt_index</td><td>The weight memory index. </td></tr>
    <tr><td class="paramname">opcode</td><td>The ALU opcode. </td></tr>
    <tr><td class="paramname">use_imm</td><td>Use immediate in ALU mode if set to true. </td></tr>
    <tr><td class="paramname">imm_val</td><td>Immediate value in ALU mode. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7819fd6126be410beb563cdc2af0de40"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VTAWriteBarrier </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="runtime_8h.html#a2e3faa14b1dcf7821997a901f2fefd81">VTACommandHandle</a>&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>elem_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>extent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform a write barrier to make a memory region visible to the CPU. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmd</td><td>The VTA command handle. </td></tr>
    <tr><td class="paramname">buffer</td><td>The head buffer pointer. </td></tr>
    <tr><td class="paramname">elem_bits</td><td>The size in bits of each element. </td></tr>
    <tr><td class="paramname">start</td><td>The start of the region (in elements). </td></tr>
    <tr><td class="paramname">extent</td><td>The end of the region (in elements). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Apr 6 2019 11:14:40 for tvm by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
