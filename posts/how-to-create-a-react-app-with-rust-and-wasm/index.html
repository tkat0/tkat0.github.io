<!DOCTYPE html><html lang="ja-jp" class="scroll-smooth"><head><meta charSet="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><title>How to create a React app with Rust and WebAssembly</title><meta name="robots" content="follow, index"/><meta name="description" content="In this article, I&#x27;ll introduce followings through creating simple demo application."/><meta property="og:url" content="https://tkat0.dev//posts/how-to-create-a-react-app-with-rust-and-wasm/"/><meta property="og:type" content="article"/><meta property="og:site_name" content="tkat0.dev"/><meta property="og:description" content="In this article, I&#x27;ll introduce followings through creating simple demo application."/><meta property="og:title" content="How to create a React app with Rust and WebAssembly"/><meta property="og:image" content="https://tkat0.dev//static/images/twitter-card.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://twitter.com/_tkato_"/><meta name="twitter:title" content="How to create a React app with Rust and WebAssembly"/><meta name="twitter:description" content="In this article, I&#x27;ll introduce followings through creating simple demo application."/><meta name="twitter:image" content="https://tkat0.dev//static/images/twitter-card.png"/><link rel="canonical" href="https://tkat0.dev//posts/how-to-create-a-react-app-with-rust-and-wasm/"/><meta property="article:published_time" content="2022-01-06T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://tkat0.dev//posts/how-to-create-a-react-app-with-rust-and-wasm"
  },
  "headline": "How to create a React app with Rust and WebAssembly",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://tkat0.dev//static/images/twitter-card.png"
    }
  ],
  "datePublished": "2022-01-06T00:00:00.000Z",
  "dateModified": "2022-01-06T00:00:00.000Z",
  "author": {
    "@type": "Person",
    "name": "tkat0"
  },
  "publisher": {
    "@type": "Organization",
    "name": "tkat0",
    "logo": {
      "@type": "ImageObject",
      "url": "https://tkat0.dev//static/images/tkat0.jpg"
    }
  },
  "description": "In this article, I'll introduce followings through creating simple demo application."
}</script><meta name="next-head-count" content="19"/><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/favicons/favicon-16x16.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/media/2aaf0723e720e8b9.p.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/7079befd3a2cd672.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7079befd3a2cd672.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-70df5622b4020830.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-63d7f848a4309603.js" defer=""></script><script src="/_next/static/chunks/pages/_app-6a9774580a51b196.js" defer=""></script><script src="/_next/static/chunks/896-f5176a3de761310c.js" defer=""></script><script src="/_next/static/chunks/447-6d81102f1475f3cd.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5B...slug%5D-989a64eb0543fe6c.js" defer=""></script><script src="/_next/static/BbtclRdEExvhlqOtznToX/_buildManifest.js" defer=""></script><script src="/_next/static/BbtclRdEExvhlqOtznToX/_ssgManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="__className_9c9965 flex h-screen flex-col justify-between font-sans"><header class="flex items-center justify-between py-10"><div><a aria-label="tkat0.dev" href="/"><div class="flex items-center justify-between"><div class="mr-3"><img alt="avatar" src="/static/images/tkat0.jpg" width="48" height="48" decoding="async" data-nimg="1" class="rounded-full" loading="lazy" style="color:transparent"/></div><div class="h-6 text-2xl font-semibold">tkat0.dev</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/posts/">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags/">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about/">About</a></div><a class="rounded-lg border-2 border-gray-700 p-1 dark:border-gray-200" href="/en/posts/how-to-create-a-react-app-with-rust-and-wasm/">EN</a><button aria-label="Toggle Dark Mode" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/posts/">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags/">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about/">About</a></div></nav></div></div></div></header><main class="mb-auto"><section class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div><header><div class="space-y-1 border-b border-gray-200 pb-10 text-center dark:border-gray-700"><dl><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2022-01-06T00:00:00.000Z">2022年1月6日</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">How to create a React app with Rust and WebAssembly</h1></div></div></header><div class="grid-rows-[auto_1fr] divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:divide-y-0"><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><details open=""><summary class="ml-6 pt-2 pb-2 text-xl font-bold">Table of Contents</summary><div class="ml-6"><ul><li class="false"><a href="#summary">Summary</a></li><li class="false"><a href="#what-is-webassembly">What is WebAssembly?</a></li><li class="false"><a href="#create-a-react-app-with-create-react-app">Create a React App with create-react-app</a></li><li class="false"><a href="#create-rust-library-for-wasm">Create Rust library for Wasm</a></li><li class="ml-6"><a href="#create-rust-library-with-cargo">Create Rust library with cargo.</a></li><li class="ml-6"><a href="#implement-a-rust-function-that-you-want-to-call-from-javascript">Implement a Rust function that you want to call from JavaScript.</a></li><li class="ml-6"><a href="#wrap-the-function-with-wasm-bindgen-to-export-it-as-wasm">Wrap the function with wasm-bindgen to export it as Wasm.</a></li><li class="ml-6"><a href="#build-as-wasm-library-with-wasm-pack">Build as Wasm library with wasm-pack</a></li><li class="ml-6"><a href="#call-the-wasm-function-from-the-react-app">Call the Wasm function from the React app.</a></li><li class="false"><a href="#advanced-topics">Advanced topics</a></li><li class="false"><a href="#conclusion">Conclusion</a></li></ul></div></details><br/><h2 id="summary"><a href="#summary" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Summary</h2><p>In this article, I&#x27;ll introduce followings through creating simple demo application.</p><ul><li>How to create a React app quickly with <code>create-react-app</code>.</li><li>How to create a Wasm library with Rust.</li><li>How to combile a React app with Wasm library.</li></ul><p>You can see all code in <a target="_blank" rel="noopener noreferrer" href="https://github.com/tkat0/react-wasm-tutorial">tkat0/react-wasm-tutorial</a>.</p><h2 id="what-is-webassembly"><a href="#what-is-webassembly" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>What is WebAssembly?</h2><p><a target="_blank" rel="noopener noreferrer" href="https://developer.mozilla.org/en-US/docs/WebAssembly">WebAssembly | MDN</a></p><blockquote><p>WebAssembly is a new type of code that can be run in modern web browsers — it is a low-level assembly-like language with a compact binary format that runs with near-native performance and provides languages such as C/C++, C# and Rust with a compilation target so that they can run on the web. It is also designed to run alongside JavaScript, allowing both to work together.</p></blockquote><h2 id="create-a-react-app-with-create-react-app"><a href="#create-a-react-app-with-create-react-app" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Create a React App with <code>create-react-app</code></h2><p>You can create a React app with <a target="_blank" rel="noopener noreferrer" href="https://github.com/facebook/create-react-app">create-react-app</a> with one command.</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">$ npx create-react-app react-wasm-tutorial <span class="token variable parameter">--template</span> typescript
</span><span class="code-line"><span class="token punctuation">..</span>.
</span><span class="code-line">Success<span class="token operator">!</span> Created react-wasm-tutorial at /Users/tkat0/GitHub/react-wasm-tutorial
</span></code></pre></div><p>Then you can launch the app.</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">$ <span class="token builtin class-name">cd</span> react-wasm-tutorial
</span><span class="code-line">$ <span class="token function">npm</span> start
</span><span class="code-line"><span class="token punctuation">..</span>.
</span><span class="code-line">Starting the development server<span class="token punctuation">..</span>.
</span><span class="code-line">Compiled successfully<span class="token operator">!</span>
</span><span class="code-line">
</span><span class="code-line">You can now view react-wasm-tutorial <span class="token keyword">in</span> the browser.
</span><span class="code-line">
</span><span class="code-line">Local: http://localhost:3000
</span><span class="code-line">On Your Network: http://192.168.0.153:3000
</span></code></pre></div><div><img alt="" src="/static/images/202201/how-to-create-a-react-app-with-rust-and-wasm/before.png" width="1371" height="1074" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/></div><div class="relative"><pre><code class="code-highlight language-ts"><span class="code-line"><span class="token keyword">import</span> and call
</span><span class="code-line"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;react&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> logo <span class="token keyword">from</span> <span class="token string">&#x27;./logo.svg&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token string">&#x27;./App.css&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span>header className<span class="token operator">=</span><span class="token string">&quot;App-header&quot;</span><span class="token operator">&gt;</span>
</span><span class="code-line">        <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>logo<span class="token punctuation">}</span> className<span class="token operator">=</span><span class="token string">&quot;App-logo&quot;</span> alt<span class="token operator">=</span><span class="token string">&quot;logo&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
</span><span class="code-line">          Edit <span class="token operator">&lt;</span>code<span class="token operator">&gt;</span>src<span class="token operator">/</span>App<span class="token punctuation">.</span>tsx<span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">&gt;</span> and save to reload<span class="token punctuation">.</span>
</span><span class="code-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
</span><span class="code-line">        <span class="token operator">&lt;</span>a
</span><span class="code-line">          className<span class="token operator">=</span><span class="token string">&quot;App-link&quot;</span>
</span><span class="code-line">          href<span class="token operator">=</span><span class="token string">&quot;https://reactjs.org&quot;</span>
</span><span class="code-line">          target<span class="token operator">=</span><span class="token string">&quot;_blank&quot;</span>
</span><span class="code-line">          rel<span class="token operator">=</span><span class="token string">&quot;noopener noreferrer&quot;</span>
</span><span class="code-line">        <span class="token operator">&gt;</span>
</span><span class="code-line">          Learn React
</span><span class="code-line">        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
</span><span class="code-line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</span></code></pre></div><p>Today, we&#x27;ll add a Wasm library to this react app. I recommend using this for creating a demo like this.</p><h2 id="create-rust-library-for-wasm"><a href="#create-rust-library-for-wasm" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Create Rust library for Wasm</h2><p>To add Wasm to the React app, you need to follow these steps.</p><ul><li>Create Rust library with <code>cargo</code>.</li><li>Implement a Rust function that you want to call from JavaScript.</li><li>Wrap the function with <code>wasm-bindgen</code> to export it as Wasm.</li><li>Build as Wasm library with <code>wasm-pack</code>.</li><li>Call the Wasm function from the React app.</li></ul><h3 id="create-rust-library-with-cargo"><a href="#create-rust-library-with-cargo" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Create Rust library with <code>cargo</code>.</h3><p>Create Rust library with <code>cargo</code>.</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">$ <span class="token function">cargo</span> new wasm-lib <span class="token variable parameter">--lib</span>
</span><span class="code-line">     Created library <span class="token variable"><span class="token variable">`</span>wasm-lib<span class="token variable">`</span></span> package
</span></code></pre></div><h3 id="implement-a-rust-function-that-you-want-to-call-from-javascript"><a href="#implement-a-rust-function-that-you-want-to-call-from-javascript" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Implement a Rust function that you want to call from JavaScript.</h3><p>Simply, we&#x27;ll implement <code>add</code> function and call it from JavaScript.</p><div class="relative"><pre><code class="code-highlight language-rust"><span class="code-line"><span class="token comment">// lib.rs</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">fn</span> <span class="token function function-definition">add</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token keyword">i32</span><span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token keyword">i32</span> <span class="token punctuation">{</span>
</span><span class="code-line">    a <span class="token operator">+</span> b
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token attr-name attribute">#[test]</span>
</span><span class="code-line"><span class="token keyword">fn</span> <span class="token function function-definition">add_test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token property macro">assert_eq!</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><p>You can run an unittest like this. In this time, the function is built as native environment not Wasm.</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">$ <span class="token builtin class-name">cd</span> wasm-lib
</span><span class="code-line">$ <span class="token function">cargo</span> <span class="token builtin class-name">test</span>
</span><span class="code-line">   Compiling wasm-lib v0.1.0 <span class="token punctuation">(</span>/Users/tkat0/GitHub/react-wasm-tutorial/wasm-lib<span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">..</span>.
</span><span class="code-line">running <span class="token number">1</span> <span class="token builtin class-name">test</span>
</span><span class="code-line"><span class="token builtin class-name">test</span> add_test <span class="token punctuation">..</span>. ok
</span></code></pre></div><h3 id="wrap-the-function-with-wasm-bindgen-to-export-it-as-wasm"><a href="#wrap-the-function-with-wasm-bindgen-to-export-it-as-wasm" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Wrap the function with <code>wasm-bindgen</code> to export it as Wasm.</h3><p><a target="_blank" rel="noopener noreferrer" href="https://rustwasm.github.io/wasm-bindgen/introduction.html"><code>wasm-bindgen</code></a> is Rust library that facilitate high-level interactions between Wasm and JavaScript. For example, you can call Rust(Wasm) from JavaScript, and vice versa.</p><p>To add <code>wasm-bindgen</code> dependency, you need to add it to Cargo.toml.</p><div class="relative"><pre><code class="code-highlight language-diff"><span class="code-line">[package]
</span><span class="code-line">name = &quot;wasm-lib&quot;
</span><span class="code-line">version = &quot;0.1.0&quot;
</span><span class="code-line">edition = &quot;2021&quot;
</span><span class="code-line">
</span><span class="code-line"># See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html
</span><span class="code-line">
</span><span class="code-line inserted"><span class="token inserted inserted-sign"><span class="token inserted prefix">+</span><span class="token line">[lib]
</span></span></span><span class="code-line inserted"><span class="token inserted inserted-sign"><span class="token line"></span><span class="token inserted prefix">+</span><span class="token line">crate-type = [&quot;cdylib&quot;]
</span></span></span><span class="code-line"><span class="token inserted inserted-sign"><span class="token line"></span></span>
</span><span class="code-line">[dependencies]
</span><span class="code-line inserted"><span class="token inserted inserted-sign"><span class="token inserted prefix">+</span><span class="token line">wasm-bindgen = &quot;0.2.78&quot;
</span></span></span></code></pre></div><p>Then, Let&#x27;s wrap the function with <code>wasm-bindgen</code>. Notice that only public function can be exported.</p><p>(updated Jan 2, 2022: thank you @tardisgallifrey)</p><div class="relative"><pre><code class="code-highlight language-diff"><span class="code-line inserted"><span class="token inserted inserted-sign"><span class="token inserted prefix">+</span><span class="token line">use wasm_bindgen::prelude::*;
</span></span></span><span class="code-line"><span class="token inserted inserted-sign"><span class="token line"></span></span>
</span><span class="code-line inserted"><span class="token inserted inserted-sign"><span class="token inserted prefix">+</span><span class="token line">#[wasm_bindgen]
</span></span></span><span class="code-line"><span class="token inserted inserted-sign"><span class="token line"></span></span>pub fn add(a: i32, b: i32) -&gt; i32 {
</span><span class="code-line"><span class="token unchanged"><span class="token unchanged prefix"> </span><span class="token line">   a + b
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span></span>}
</span><span class="code-line">
</span><span class="code-line">#[test]
</span><span class="code-line">fn add_test() {
</span><span class="code-line"><span class="token unchanged"><span class="token unchanged prefix"> </span><span class="token line">   assert_eq!(1 + 1, add(1, 1));
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span></span>}
</span></code></pre></div><h3 id="build-as-wasm-library-with-wasm-pack"><a href="#build-as-wasm-library-with-wasm-pack" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Build as Wasm library with <code>wasm-pack</code></h3><p>By using <code>wasm-bindgen</code>, you can build Rust as Wasm. However, To load and run Wasm from JavaScript, You need some JavaScript boilerplate codes (like <code>WebAssembly.instantiate</code>).</p><p>To do that, you can use <a target="_blank" rel="noopener noreferrer" href="https://github.com/rustwasm/wasm-pack"><code>wasm-pack</code></a>!</p><p>At first, you need to install it.</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">$ <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>
</span><span class="code-line">$ <span class="token function">cargo</span> <span class="token function">install</span> wasm-pack
</span><span class="code-line">$ wasm-pack <span class="token variable parameter">--version</span>
</span><span class="code-line">wasm-pack <span class="token number">0.10</span>.2
</span></code></pre></div><p>Then, let&#x27;s add npm script to call it by <code>npm run build:wasm</code>.</p><div class="relative"><pre><code class="code-highlight language-json"><span class="code-line">  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts start&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts build&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">+    <span class="token property">&quot;build:wasm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cd wasm-lib &amp;&amp; wasm-pack build --target web --out-dir pkg&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts test&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token property">&quot;eject&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-scripts eject&quot;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span></code></pre></div><p>Finally, you can build Rust as Wasm and generate some boilerplate codes.</p><div class="relative"><pre><code class="code-highlight"><span class="code-line">$ npm run build:wasm
</span><span class="code-line">[INFO]: 🎯  Checking for the Wasm target...
</span><span class="code-line">[INFO]: 🌀  Compiling to Wasm...
</span><span class="code-line">...
</span><span class="code-line">[INFO]: Optimizing wasm binaries with `wasm-opt`...
</span><span class="code-line">[INFO]: ✨   Done in 1.58s
</span><span class="code-line">[INFO]: 📦   Your wasm pkg is ready to publish at /Users/tkat0/GitHub/react-wasm-tutorial/wasm-lib/pkg.
</span></code></pre></div><p>Let&#x27;s check the output directory generated by <code>wasm-pack</code>.</p><p>You noticed <code>package.json</code> file was generated.</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">$ tree wasm-lib/pkg
</span><span class="code-line">├── package.json
</span><span class="code-line">├── wasm_lib.d.ts
</span><span class="code-line">├── wasm_lib.js
</span><span class="code-line">├── wasm_lib_bg.wasm
</span><span class="code-line">└── wasm_lib_bg.wasm.d.ts
</span></code></pre></div><p>So you can install the Wasm library to other project easily. Let&#x27;s install it to the React app.</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line">$ <span class="token function">npm</span> <span class="token function">install</span> ./wasm-lib/pkg
</span></code></pre></div><p>The library is added like this. Ofcourse, you can publish the library in npm.</p><div class="relative"><pre><code class="code-highlight language-diff"><span class="code-line"><span class="token unchanged"><span class="token unchanged prefix"> </span><span class="token line"> &quot;dependencies&quot;: {
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">   &quot;@testing-library/jest-dom&quot;: &quot;^5.16.1&quot;,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">   &quot;@testing-library/react&quot;: &quot;^12.1.2&quot;,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">   &quot;@testing-library/user-event&quot;: &quot;^13.5.0&quot;,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">   &quot;@types/jest&quot;: &quot;^27.4.0&quot;,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">   &quot;@types/node&quot;: &quot;^16.11.19&quot;,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">   &quot;@types/react&quot;: &quot;^17.0.38&quot;,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">   &quot;@types/react-dom&quot;: &quot;^17.0.11&quot;,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">   &quot;react&quot;: &quot;^17.0.2&quot;,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">   &quot;react-dom&quot;: &quot;^17.0.2&quot;,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">   &quot;react-scripts&quot;: &quot;5.0.0&quot;,
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">   &quot;typescript&quot;: &quot;^4.5.4&quot;,
</span></span></span><span class="code-line inserted"><span class="token unchanged"><span class="token line"></span></span><span class="token inserted inserted-sign"><span class="token inserted prefix">+</span><span class="token line">    &quot;wasm-lib&quot;: &quot;file:wasm-lib/pkg&quot;,
</span></span></span><span class="code-line"><span class="token inserted inserted-sign"><span class="token line"></span></span><span class="token unchanged"><span class="token unchanged prefix"> </span><span class="token line">   &quot;web-vitals&quot;: &quot;^2.1.2&quot;
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line"> },
</span></span></span></code></pre></div><h3 id="call-the-wasm-function-from-the-react-app"><a href="#call-the-wasm-function-from-the-react-app" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Call the Wasm function from the React app.</h3><p>You can call the Wasm library like this.</p><div class="relative"><pre><code class="code-highlight language-diff"><span class="code-line">import and call
</span><span class="code-line">import React, { useEffect, useState } from &#x27;react&#x27;;
</span><span class="code-line inserted"><span class="token inserted inserted-sign"><span class="token inserted prefix">+</span><span class="token line">import init, { add } from &quot;wasm-lib&quot;;
</span></span></span><span class="code-line"><span class="token inserted inserted-sign"><span class="token line"></span></span>import logo from &#x27;./logo.svg&#x27;;
</span><span class="code-line">import &#x27;./App.css&#x27;;
</span><span class="code-line">
</span><span class="code-line">function App() {
</span><span class="code-line inserted"><span class="token inserted inserted-sign"><span class="token inserted prefix">+</span><span class="token line">  const [ans, setAns] = useState(0);
</span></span></span><span class="code-line inserted"><span class="token inserted inserted-sign"><span class="token line"></span><span class="token inserted prefix">+</span><span class="token line">  useEffect(() =&gt; {
</span></span></span><span class="code-line inserted"><span class="token inserted inserted-sign"><span class="token line"></span><span class="token inserted prefix">+</span><span class="token line">    init().then(() =&gt; {
</span></span></span><span class="code-line inserted"><span class="token inserted inserted-sign"><span class="token line"></span><span class="token inserted prefix">+</span><span class="token line">      setAns(add(1, 1));
</span></span></span><span class="code-line inserted"><span class="token inserted inserted-sign"><span class="token line"></span><span class="token inserted prefix">+</span><span class="token line">    })
</span></span></span><span class="code-line inserted"><span class="token inserted inserted-sign"><span class="token line"></span><span class="token inserted prefix">+</span><span class="token line">  }, [])
</span></span></span><span class="code-line"><span class="token inserted inserted-sign"><span class="token line"></span></span><span class="token unchanged"><span class="token unchanged prefix"> </span><span class="token line"> return (
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">   &lt;div className=&quot;App&quot;&gt;
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">     &lt;header className=&quot;App-header&quot;&gt;
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">       &lt;img src={logo} className=&quot;App-logo&quot; alt=&quot;logo&quot; /&gt;
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">       &lt;p&gt;
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">         Edit &lt;code&gt;src/App.tsx&lt;/code&gt; and save to reload.
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">       &lt;/p&gt;
</span></span></span><span class="code-line inserted"><span class="token unchanged"><span class="token line"></span></span><span class="token inserted inserted-sign"><span class="token inserted prefix">+</span><span class="token line">        &lt;p&gt;1 + 1 = {ans}&lt;/p&gt;
</span></span></span><span class="code-line"><span class="token inserted inserted-sign"><span class="token line"></span></span><span class="token unchanged"><span class="token unchanged prefix"> </span><span class="token line">       &lt;a
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">         className=&quot;App-link&quot;
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">         href=&quot;https://reactjs.org&quot;
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">         target=&quot;_blank&quot;
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">         rel=&quot;noopener noreferrer&quot;
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">       &gt;
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">         Learn React
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">       &lt;/a&gt;
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">     &lt;/header&gt;
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line">   &lt;/div&gt;
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span><span class="token unchanged prefix"> </span><span class="token line"> );
</span></span></span><span class="code-line"><span class="token unchanged"><span class="token line"></span></span>}
</span><span class="code-line">
</span><span class="code-line">export default App;
</span></code></pre></div><p>Finaly, you can see this screen.</p><div><img alt="" src="/static/images/202201/how-to-create-a-react-app-with-rust-and-wasm/after.png" width="1331" height="1226" decoding="async" data-nimg="1" loading="lazy" style="color:transparent"/></div><h2 id="advanced-topics"><a href="#advanced-topics" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Advanced topics</h2><p>In this article, I provided the quick introduction for Rust and Wasm. To use Wasm in production, you should think about the following topics.</p><ul><li>Logging</li><li>Multi-Threading</li><li>Exception handling</li><li>Call JavaScript from Rust</li><li>Call Rust <code>struct</code> from JavaScript</li><li>Testing</li><li>Cross platform</li></ul><h2 id="conclusion"><a href="#conclusion" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Conclusion</h2><p>In this article, I introduced followings through creating simple demo application.</p><ul><li>How to create a React app quickly with <code>create-react-app</code>.</li><li>How to create a Wasm library with Rust.</li><li>How to combile a React app with Wasm library.</li></ul><p>Based on this, let&#x27;s create a React app with Rust! Thank you for reading to the end.</p></div></div><div class="pt-6 pb-6 text-center text-gray-700 dark:text-gray-300" id="comment"><div class="giscus"></div></div><footer><div class="flex flex-col text-sm font-medium sm:flex-row sm:justify-between sm:text-base"><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" aria-label="Previous post: 2021年の振り返り" href="/posts/2021-review/">← <!-- -->2021年の振り返り</a></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" aria-label="Next post: TektonでRustのコンテナビルドする際のmount=type=cacheを有効にする" href="/posts/how-to-enable-buld-cache-for-rust-in-tekton/">TektonでRustのコンテナビルドする際のmount=type=cacheを有効にする<!-- --> →</a></div></div></footer></div></div></article></section></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/tkat0"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/tkat0/"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://twitter.com/_tkato_"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>tkat0</div><div> • </div><div>© 2023</div><div> • </div><a href="/">tkat0.dev</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"How to create a React app with Rust and WebAssembly","date":"2022-01-06T00:00:00.000Z","tags":["wasm","rust"],"draft":false,"summary":"In this article, I'll introduce followings through creating simple demo application.","slug":"how-to-create-a-react-app-with-rust-and-wasm","locale":"ja","body":{"raw":"\n\u003cTOCInline toc={props.toc} asDisclosure /\u003e\n\u003cbr /\u003e\n\n## Summary\n\nIn this article, I'll introduce followings through creating simple demo application.\n\n- How to create a React app quickly with `create-react-app`.\n- How to create a Wasm library with Rust.\n- How to combile a React app with Wasm library.\n\nYou can see all code in [tkat0/react-wasm-tutorial](https://github.com/tkat0/react-wasm-tutorial).\n\n## What is WebAssembly?\n\n[WebAssembly | MDN](https://developer.mozilla.org/en-US/docs/WebAssembly)\n\n\u003e WebAssembly is a new type of code that can be run in modern web browsers — it is a low-level assembly-like language with a compact binary format that runs with near-native performance and provides languages such as C/C++, C# and Rust with a compilation target so that they can run on the web. It is also designed to run alongside JavaScript, allowing both to work together.\n\n## Create a React App with `create-react-app`\n\nYou can create a React app with [create-react-app](https://github.com/facebook/create-react-app) with one command.\n\n```bash\n$ npx create-react-app react-wasm-tutorial --template typescript\n...\nSuccess! Created react-wasm-tutorial at /Users/tkat0/GitHub/react-wasm-tutorial\n```\n\nThen you can launch the app.\n\n```bash\n$ cd react-wasm-tutorial\n$ npm start\n...\nStarting the development server...\nCompiled successfully!\n\nYou can now view react-wasm-tutorial in the browser.\n\nLocal: http://localhost:3000\nOn Your Network: http://192.168.0.153:3000\n```\n\n![](/static/images/202201/how-to-create-a-react-app-with-rust-and-wasm/before.png)\n\n```ts\nimport and call\nimport React, { useEffect, useState } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nfunction App() {\n  return (\n    \u003cdiv className=\"App\"\u003e\n      \u003cheader className=\"App-header\"\u003e\n        \u003cimg src={logo} className=\"App-logo\" alt=\"logo\" /\u003e\n        \u003cp\u003e\n          Edit \u003ccode\u003esrc/App.tsx\u003c/code\u003e and save to reload.\n        \u003c/p\u003e\n        \u003ca\n          className=\"App-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        \u003e\n          Learn React\n        \u003c/a\u003e\n      \u003c/header\u003e\n    \u003c/div\u003e\n  );\n}\n\nexport default App;\n```\n\nToday, we'll add a Wasm library to this react app. I recommend using this for creating a demo like this.\n\n## Create Rust library for Wasm\n\nTo add Wasm to the React app, you need to follow these steps.\n\n- Create Rust library with `cargo`.\n- Implement a Rust function that you want to call from JavaScript.\n- Wrap the function with `wasm-bindgen` to export it as Wasm.\n- Build as Wasm library with `wasm-pack`.\n- Call the Wasm function from the React app.\n\n### Create Rust library with `cargo`.\n\nCreate Rust library with `cargo`.\n\n```bash\n$ cargo new wasm-lib --lib\n     Created library `wasm-lib` package\n```\n\n### Implement a Rust function that you want to call from JavaScript.\n\nSimply, we'll implement `add` function and call it from JavaScript.\n\n```rust\n// lib.rs\n\nfn add(a: i32, b: i32) -\u003e i32 {\n    a + b\n}\n\n#[test]\nfn add_test() {\n    assert_eq!(1 + 1, add(1, 1));\n}\n```\n\nYou can run an unittest like this.\nIn this time, the function is built as native environment not Wasm.\n\n```bash\n$ cd wasm-lib\n$ cargo test\n   Compiling wasm-lib v0.1.0 (/Users/tkat0/GitHub/react-wasm-tutorial/wasm-lib)\n...\nrunning 1 test\ntest add_test ... ok\n```\n\n### Wrap the function with `wasm-bindgen` to export it as Wasm.\n\n[`wasm-bindgen`](https://rustwasm.github.io/wasm-bindgen/introduction.html) is Rust library that facilitate high-level interactions between Wasm and JavaScript.\nFor example, you can call Rust(Wasm) from JavaScript, and vice versa.\n\nTo add `wasm-bindgen` dependency, you need to add it to Cargo.toml.\n\n```diff\n[package]\nname = \"wasm-lib\"\nversion = \"0.1.0\"\nedition = \"2021\"\n\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n\n+[lib]\n+crate-type = [\"cdylib\"]\n\n[dependencies]\n+wasm-bindgen = \"0.2.78\"\n```\n\nThen, Let's wrap the function with `wasm-bindgen`. Notice that only public function can be exported.\n\n(updated Jan 2, 2022: thank you @tardisgallifrey)\n\n```diff\n+use wasm_bindgen::prelude::*;\n\n+#[wasm_bindgen]\npub fn add(a: i32, b: i32) -\u003e i32 {\n    a + b\n}\n\n#[test]\nfn add_test() {\n    assert_eq!(1 + 1, add(1, 1));\n}\n```\n\n### Build as Wasm library with `wasm-pack`\n\nBy using `wasm-bindgen`, you can build Rust as Wasm.\nHowever, To load and run Wasm from JavaScript, You need some JavaScript boilerplate codes (like `WebAssembly.instantiate`).\n\nTo do that, you can use [`wasm-pack`](https://github.com/rustwasm/wasm-pack)!\n\nAt first, you need to install it.\n\n```bash\n$ cd ..\n$ cargo install wasm-pack\n$ wasm-pack --version\nwasm-pack 0.10.2\n```\n\nThen, let's add npm script to call it by `npm run build:wasm`.\n\n```json\n  \"scripts\": {\n    \"start\": \"react-scripts start\",\n    \"build\": \"react-scripts build\",\n+    \"build:wasm\": \"cd wasm-lib \u0026\u0026 wasm-pack build --target web --out-dir pkg\",\n    \"test\": \"react-scripts test\",\n    \"eject\": \"react-scripts eject\"\n  },\n```\n\nFinally, you can build Rust as Wasm and generate some boilerplate codes.\n\n```\n$ npm run build:wasm\n[INFO]: 🎯  Checking for the Wasm target...\n[INFO]: 🌀  Compiling to Wasm...\n...\n[INFO]: Optimizing wasm binaries with `wasm-opt`...\n[INFO]: ✨   Done in 1.58s\n[INFO]: 📦   Your wasm pkg is ready to publish at /Users/tkat0/GitHub/react-wasm-tutorial/wasm-lib/pkg.\n```\n\nLet's check the output directory generated by `wasm-pack`.\n\nYou noticed `package.json` file was generated.\n\n```bash\n$ tree wasm-lib/pkg\n├── package.json\n├── wasm_lib.d.ts\n├── wasm_lib.js\n├── wasm_lib_bg.wasm\n└── wasm_lib_bg.wasm.d.ts\n```\n\nSo you can install the Wasm library to other project easily.\nLet's install it to the React app.\n\n```bash\n$ npm install ./wasm-lib/pkg\n```\n\nThe library is added like this.\nOfcourse, you can publish the library in npm.\n\n```diff\n  \"dependencies\": {\n    \"@testing-library/jest-dom\": \"^5.16.1\",\n    \"@testing-library/react\": \"^12.1.2\",\n    \"@testing-library/user-event\": \"^13.5.0\",\n    \"@types/jest\": \"^27.4.0\",\n    \"@types/node\": \"^16.11.19\",\n    \"@types/react\": \"^17.0.38\",\n    \"@types/react-dom\": \"^17.0.11\",\n    \"react\": \"^17.0.2\",\n    \"react-dom\": \"^17.0.2\",\n    \"react-scripts\": \"5.0.0\",\n    \"typescript\": \"^4.5.4\",\n+    \"wasm-lib\": \"file:wasm-lib/pkg\",\n    \"web-vitals\": \"^2.1.2\"\n  },\n```\n\n### Call the Wasm function from the React app.\n\nYou can call the Wasm library like this.\n\n```diff\nimport and call\nimport React, { useEffect, useState } from 'react';\n+import init, { add } from \"wasm-lib\";\nimport logo from './logo.svg';\nimport './App.css';\n\nfunction App() {\n+  const [ans, setAns] = useState(0);\n+  useEffect(() =\u003e {\n+    init().then(() =\u003e {\n+      setAns(add(1, 1));\n+    })\n+  }, [])\n  return (\n    \u003cdiv className=\"App\"\u003e\n      \u003cheader className=\"App-header\"\u003e\n        \u003cimg src={logo} className=\"App-logo\" alt=\"logo\" /\u003e\n        \u003cp\u003e\n          Edit \u003ccode\u003esrc/App.tsx\u003c/code\u003e and save to reload.\n        \u003c/p\u003e\n+        \u003cp\u003e1 + 1 = {ans}\u003c/p\u003e\n        \u003ca\n          className=\"App-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        \u003e\n          Learn React\n        \u003c/a\u003e\n      \u003c/header\u003e\n    \u003c/div\u003e\n  );\n}\n\nexport default App;\n```\n\nFinaly, you can see this screen.\n\n![](/static/images/202201/how-to-create-a-react-app-with-rust-and-wasm/after.png)\n\n## Advanced topics\n\nIn this article, I provided the quick introduction for Rust and Wasm.\nTo use Wasm in production, you should think about the following topics.\n\n- Logging\n- Multi-Threading\n- Exception handling\n- Call JavaScript from Rust\n- Call Rust `struct` from JavaScript\n- Testing\n- Cross platform\n\n## Conclusion\n\nIn this article, I introduced followings through creating simple demo application.\n\n- How to create a React app quickly with `create-react-app`.\n- How to create a Wasm library with Rust.\n- How to combile a React app with Wasm library.\n\nBased on this, let's create a React app with Rust!\nThank you for reading to the end.\n","code":"var Component=(()=\u003e{var h=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(a,e)=\u003e()=\u003e(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=\u003e{for(var s in e)i(a,s,{get:e[s],enumerable:!0})},r=(a,e,s,c)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let l of N(e))!u.call(a,l)\u0026\u0026l!==s\u0026\u0026i(a,l,{get:()=\u003ee[l],enumerable:!(c=m(e,l))||c.enumerable});return a};var b=(a,e,s)=\u003e(s=a!=null?h(k(a)):{},r(e||!a||!a.__esModule?i(s,\"default\",{value:a,enumerable:!0}):s,a)),w=a=\u003er(i({},\"__esModule\",{value:!0}),a);var d=g((I,t)=\u003e{t.exports=_jsx_runtime});var R={};f(R,{default:()=\u003ev,frontmatter:()=\u003ey});var n=b(d()),y={title:\"How to create a React app with Rust and WebAssembly\",date:new Date(16414272e5),slug:\"how-to-create-a-react-app-with-rust-and-wasm\",draft:!1,tags:[\"wasm\",\"rust\"],summary:\"In this article, I'll introduce followings through creating simple demo application.\"};function o(a){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",ul:\"ul\",li:\"li\",code:\"code\",blockquote:\"blockquote\",pre:\"pre\",div:\"div\",h3:\"h3\"},a.components),{TOCInline:s,Image:c}=e;return c||p(\"Image\",!0),s||p(\"TOCInline\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s,{toc:a.toc,asDisclosure:!0}),(0,n.jsx)(\"br\",{}),(0,n.jsxs)(e.h2,{id:\"summary\",children:[(0,n.jsx)(e.a,{href:\"#summary\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Summary\"]}),(0,n.jsx)(e.p,{children:\"In this article, I'll introduce followings through creating simple demo application.\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[\"How to create a React app quickly with \",(0,n.jsx)(e.code,{children:\"create-react-app\"}),\".\"]}),(0,n.jsx)(e.li,{children:\"How to create a Wasm library with Rust.\"}),(0,n.jsx)(e.li,{children:\"How to combile a React app with Wasm library.\"})]}),(0,n.jsxs)(e.p,{children:[\"You can see all code in \",(0,n.jsx)(e.a,{href:\"https://github.com/tkat0/react-wasm-tutorial\",children:\"tkat0/react-wasm-tutorial\"}),\".\"]}),(0,n.jsxs)(e.h2,{id:\"what-is-webassembly\",children:[(0,n.jsx)(e.a,{href:\"#what-is-webassembly\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"What is WebAssembly?\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/WebAssembly\",children:\"WebAssembly | MDN\"})}),(0,n.jsx)(e.blockquote,{children:(0,n.jsx)(e.p,{children:\"WebAssembly is a new type of code that can be run in modern web browsers \\u2014 it is a low-level assembly-like language with a compact binary format that runs with near-native performance and provides languages such as C/C++, C# and Rust with a compilation target so that they can run on the web. It is also designed to run alongside JavaScript, allowing both to work together.\"})}),(0,n.jsxs)(e.h2,{id:\"create-a-react-app-with-create-react-app\",children:[(0,n.jsx)(e.a,{href:\"#create-a-react-app-with-create-react-app\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Create a React App with \",(0,n.jsx)(e.code,{children:\"create-react-app\"})]}),(0,n.jsxs)(e.p,{children:[\"You can create a React app with \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/create-react-app\",children:\"create-react-app\"}),\" with one command.\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ npx create-react-app react-wasm-tutorial \",(0,n.jsx)(e.span,{className:\"token variable parameter\",children:\"--template\"}),` typescript\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),`.\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Success\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),` Created react-wasm-tutorial at /Users/tkat0/GitHub/react-wasm-tutorial\n`]})]})}),(0,n.jsx)(e.p,{children:\"Then you can launch the app.\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"cd\"}),` react-wasm-tutorial\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),` start\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),`.\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Starting the development server\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),`.\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Compiled successfully\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"You can now view react-wasm-tutorial \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"in\"}),` the browser.\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`Local: http://localhost:3000\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`On Your Network: http://192.168.0.153:3000\n`})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(c,{alt:\"\",src:\"/static/images/202201/how-to-create-a-react-app-with-rust-and-wasm/before.png\",width:\"1371\",height:\"1074\"})}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-ts\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` and call\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" React\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" useEffect\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" useState \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" logo \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./logo.svg'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./App.css'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"App\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),\"div className\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"App\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),\"header className\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"App-header\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),\"img src\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"logo\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" className\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"App-logo\"'}),\" alt\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"logo\"'}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),\"p\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          Edit \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),\"code\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),\"src\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"App\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"tsx\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"code\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),\" and save to reload\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"p\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),`a\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          className\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"App-link\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          href\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"https://reactjs.org\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"_blank\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          rel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"noopener noreferrer\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`          Learn React\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"a\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"header\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003c\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"div\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"\u003e\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"default\"}),\" App\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"Today, we'll add a Wasm library to this react app. I recommend using this for creating a demo like this.\"}),(0,n.jsxs)(e.h2,{id:\"create-rust-library-for-wasm\",children:[(0,n.jsx)(e.a,{href:\"#create-rust-library-for-wasm\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Create Rust library for Wasm\"]}),(0,n.jsx)(e.p,{children:\"To add Wasm to the React app, you need to follow these steps.\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[\"Create Rust library with \",(0,n.jsx)(e.code,{children:\"cargo\"}),\".\"]}),(0,n.jsx)(e.li,{children:\"Implement a Rust function that you want to call from JavaScript.\"}),(0,n.jsxs)(e.li,{children:[\"Wrap the function with \",(0,n.jsx)(e.code,{children:\"wasm-bindgen\"}),\" to export it as Wasm.\"]}),(0,n.jsxs)(e.li,{children:[\"Build as Wasm library with \",(0,n.jsx)(e.code,{children:\"wasm-pack\"}),\".\"]}),(0,n.jsx)(e.li,{children:\"Call the Wasm function from the React app.\"})]}),(0,n.jsxs)(e.h3,{id:\"create-rust-library-with-cargo\",children:[(0,n.jsx)(e.a,{href:\"#create-rust-library-with-cargo\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Create Rust library with \",(0,n.jsx)(e.code,{children:\"cargo\"}),\".\"]}),(0,n.jsxs)(e.p,{children:[\"Create Rust library with \",(0,n.jsx)(e.code,{children:\"cargo\"}),\".\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"cargo\"}),\" new wasm-lib \",(0,n.jsx)(e.span,{className:\"token variable parameter\",children:\"--lib\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     Created library \",(0,n.jsxs)(e.span,{className:\"token variable\",children:[(0,n.jsx)(e.span,{className:\"token variable\",children:\"`\"}),\"wasm-lib\",(0,n.jsx)(e.span,{className:\"token variable\",children:\"`\"})]}),` package\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"implement-a-rust-function-that-you-want-to-call-from-javascript\",children:[(0,n.jsx)(e.a,{href:\"#implement-a-rust-function-that-you-want-to-call-from-javascript\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Implement a Rust function that you want to call from JavaScript.\"]}),(0,n.jsxs)(e.p,{children:[\"Simply, we'll implement \",(0,n.jsx)(e.code,{children:\"add\"}),\" function and call it from JavaScript.\"]}),(0,n.jsx)(e.pre,{className:\"language-rust\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-rust\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// lib.rs\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-definition\",children:\"add\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"a\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"i32\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" b\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"i32\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\u003e\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"i32\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    a \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+\"}),` b\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token attr-name attribute\",children:\"#[test]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-definition\",children:\"add_test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property macro\",children:\"assert_eq!\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"add\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"You can run an unittest like this. In this time, the function is built as native environment not Wasm.\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"cd\"}),` wasm-lib\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"cargo\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"test\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   Compiling wasm-lib v0.1.0 \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"/Users/tkat0/GitHub/react-wasm-tutorial/wasm-lib\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),`.\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"running \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"test\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"test\"}),\" add_test \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),`. ok\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"wrap-the-function-with-wasm-bindgen-to-export-it-as-wasm\",children:[(0,n.jsx)(e.a,{href:\"#wrap-the-function-with-wasm-bindgen-to-export-it-as-wasm\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Wrap the function with \",(0,n.jsx)(e.code,{children:\"wasm-bindgen\"}),\" to export it as Wasm.\"]}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://rustwasm.github.io/wasm-bindgen/introduction.html\",children:(0,n.jsx)(e.code,{children:\"wasm-bindgen\"})}),\" is Rust library that facilitate high-level interactions between Wasm and JavaScript. For example, you can call Rust(Wasm) from JavaScript, and vice versa.\"]}),(0,n.jsxs)(e.p,{children:[\"To add \",(0,n.jsx)(e.code,{children:\"wasm-bindgen\"}),\" dependency, you need to add it to Cargo.toml.\"]}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`[package]\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`name = \"wasm-lib\"\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`version = \"0.1.0\"\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`edition = \"2021\"\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`[lib]\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`crate-type = [\"cdylib\"]\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`[dependencies]\n`}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`wasm-bindgen = \"0.2.78\"\n`})]})})]})}),(0,n.jsxs)(e.p,{children:[\"Then, Let's wrap the function with \",(0,n.jsx)(e.code,{children:\"wasm-bindgen\"}),\". Notice that only public function can be exported.\"]}),(0,n.jsx)(e.p,{children:\"(updated Jan 2, 2022: thank you @tardisgallifrey)\"}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`use wasm_bindgen::prelude::*;\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`#[wasm_bindgen]\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`pub fn add(a: i32, b: i32) -\u003e i32 {\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   a + b\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`}\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`#[test]\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`fn add_test() {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   assert_eq!(1 + 1, add(1, 1));\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`}\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"build-as-wasm-library-with-wasm-pack\",children:[(0,n.jsx)(e.a,{href:\"#build-as-wasm-library-with-wasm-pack\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Build as Wasm library with \",(0,n.jsx)(e.code,{children:\"wasm-pack\"})]}),(0,n.jsxs)(e.p,{children:[\"By using \",(0,n.jsx)(e.code,{children:\"wasm-bindgen\"}),\", you can build Rust as Wasm. However, To load and run Wasm from JavaScript, You need some JavaScript boilerplate codes (like \",(0,n.jsx)(e.code,{children:\"WebAssembly.instantiate\"}),\").\"]}),(0,n.jsxs)(e.p,{children:[\"To do that, you can use \",(0,n.jsx)(e.a,{href:\"https://github.com/rustwasm/wasm-pack\",children:(0,n.jsx)(e.code,{children:\"wasm-pack\"})}),\"!\"]}),(0,n.jsx)(e.p,{children:\"At first, you need to install it.\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"cd\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"cargo\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),` wasm-pack\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ wasm-pack \",(0,n.jsx)(e.span,{className:\"token variable parameter\",children:\"--version\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"wasm-pack \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0.10\"}),`.2\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"Then, let's add npm script to call it by \",(0,n.jsx)(e.code,{children:\"npm run build:wasm\"}),\".\"]}),(0,n.jsx)(e.pre,{className:\"language-json\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-json\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"scripts\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"start\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"react-scripts start\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"build\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"react-scripts build\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"+    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"build:wasm\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"cd wasm-lib \u0026\u0026 wasm-pack build --target web --out-dir pkg\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"test\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"react-scripts test\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"eject\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"react-scripts eject\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"Finally, you can build Rust as Wasm and generate some boilerplate codes.\"}),(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`$ npm run build:wasm\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`[INFO]: \\u{1F3AF}  Checking for the Wasm target...\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`[INFO]: \\u{1F300}  Compiling to Wasm...\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`...\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:\"[INFO]: Optimizing wasm binaries with `wasm-opt`...\\n\"}),(0,n.jsx)(e.span,{className:\"code-line\",children:`[INFO]: \\u2728   Done in 1.58s\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`[INFO]: \\u{1F4E6}   Your wasm pkg is ready to publish at /Users/tkat0/GitHub/react-wasm-tutorial/wasm-lib/pkg.\n`})]})}),(0,n.jsxs)(e.p,{children:[\"Let's check the output directory generated by \",(0,n.jsx)(e.code,{children:\"wasm-pack\"}),\".\"]}),(0,n.jsxs)(e.p,{children:[\"You noticed \",(0,n.jsx)(e.code,{children:\"package.json\"}),\" file was generated.\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`$ tree wasm-lib/pkg\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 package.json\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 wasm_lib.d.ts\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 wasm_lib.js\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 wasm_lib_bg.wasm\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u2514\\u2500\\u2500 wasm_lib_bg.wasm.d.ts\n`})]})}),(0,n.jsx)(e.p,{children:\"So you can install the Wasm library to other project easily. Let's install it to the React app.\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-bash\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),` ./wasm-lib/pkg\n`]})})}),(0,n.jsx)(e.p,{children:\"The library is added like this. Ofcourse, you can publish the library in npm.\"}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` \"dependencies\": {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@testing-library/jest-dom\": \"^5.16.1\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@testing-library/react\": \"^12.1.2\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@testing-library/user-event\": \"^13.5.0\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@types/jest\": \"^27.4.0\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@types/node\": \"^16.11.19\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@types/react\": \"^17.0.38\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@types/react-dom\": \"^17.0.11\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"react\": \"^17.0.2\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"react-dom\": \"^17.0.2\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"react-scripts\": \"5.0.0\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"typescript\": \"^4.5.4\",\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`    \"wasm-lib\": \"file:wasm-lib/pkg\",\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"web-vitals\": \"^2.1.2\"\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` },\n`})]})})]})}),(0,n.jsxs)(e.h3,{id:\"call-the-wasm-function-from-the-react-app\",children:[(0,n.jsx)(e.a,{href:\"#call-the-wasm-function-from-the-react-app\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Call the Wasm function from the React app.\"]}),(0,n.jsx)(e.p,{children:\"You can call the Wasm library like this.\"}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`import and call\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`import React, { useEffect, useState } from 'react';\n`}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`import init, { add } from \"wasm-lib\";\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`import logo from './logo.svg';\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`import './App.css';\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`function App() {\n`}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`  const [ans, setAns] = useState(0);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`  useEffect(() =\u003e {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`    init().then(() =\u003e {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`      setAns(add(1, 1));\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`    })\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`  }, [])\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` return (\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \u003cdiv className=\"App\"\u003e\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`     \u003cheader className=\"App-header\"\u003e\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       \u003cimg src={logo} className=\"App-logo\" alt=\"logo\" /\u003e\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       \u003cp\u003e\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`         Edit \u003ccode\u003esrc/App.tsx\u003c/code\u003e and save to reload.\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       \u003c/p\u003e\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`        \u003cp\u003e1 + 1 = {ans}\u003c/p\u003e\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       \u003ca\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`         className=\"App-link\"\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`         href=\"https://reactjs.org\"\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`         target=\"_blank\"\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`         rel=\"noopener noreferrer\"\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       \u003e\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`         Learn React\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       \u003c/a\u003e\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`     \u003c/header\u003e\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \u003c/div\u003e\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` );\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`}\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`export default App;\n`})]})}),(0,n.jsx)(e.p,{children:\"Finaly, you can see this screen.\"}),(0,n.jsx)(e.div,{children:(0,n.jsx)(c,{alt:\"\",src:\"/static/images/202201/how-to-create-a-react-app-with-rust-and-wasm/after.png\",width:\"1331\",height:\"1226\"})}),(0,n.jsxs)(e.h2,{id:\"advanced-topics\",children:[(0,n.jsx)(e.a,{href:\"#advanced-topics\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Advanced topics\"]}),(0,n.jsx)(e.p,{children:\"In this article, I provided the quick introduction for Rust and Wasm. To use Wasm in production, you should think about the following topics.\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"Logging\"}),(0,n.jsx)(e.li,{children:\"Multi-Threading\"}),(0,n.jsx)(e.li,{children:\"Exception handling\"}),(0,n.jsx)(e.li,{children:\"Call JavaScript from Rust\"}),(0,n.jsxs)(e.li,{children:[\"Call Rust \",(0,n.jsx)(e.code,{children:\"struct\"}),\" from JavaScript\"]}),(0,n.jsx)(e.li,{children:\"Testing\"}),(0,n.jsx)(e.li,{children:\"Cross platform\"})]}),(0,n.jsxs)(e.h2,{id:\"conclusion\",children:[(0,n.jsx)(e.a,{href:\"#conclusion\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),(0,n.jsx)(e.p,{children:\"In this article, I introduced followings through creating simple demo application.\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[\"How to create a React app quickly with \",(0,n.jsx)(e.code,{children:\"create-react-app\"}),\".\"]}),(0,n.jsx)(e.li,{children:\"How to create a Wasm library with Rust.\"}),(0,n.jsx)(e.li,{children:\"How to combile a React app with Wasm library.\"})]}),(0,n.jsx)(e.p,{children:\"Based on this, let's create a React app with Rust! Thank you for reading to the end.\"})]})}function x(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(o,a)})):o(a)}var v=x;function p(a,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(R);})();\n;return Component;"},"_id":"posts/202201/how-to-create-a-react-app-with-rust-and-wasm/index.mdx","_raw":{"sourceFilePath":"posts/202201/how-to-create-a-react-app-with-rust-and-wasm/index.mdx","sourceFileName":"index.mdx","sourceFileDir":"posts/202201/how-to-create-a-react-app-with-rust-and-wasm","contentType":"mdx","flattenedPath":"posts/202201/how-to-create-a-react-app-with-rust-and-wasm"},"type":"Blog","readingTime":{"text":"6 min read","minutes":5.25,"time":315000,"words":1050},"path":"posts/how-to-create-a-react-app-with-rust-and-wasm","filePath":"posts/202201/how-to-create-a-react-app-with-rust-and-wasm/index.mdx","toc":[{"value":"Summary","url":"#summary","depth":2},{"value":"What is WebAssembly?","url":"#what-is-webassembly","depth":2},{"value":"Create a React App with create-react-app","url":"#create-a-react-app-with-create-react-app","depth":2},{"value":"Create Rust library for Wasm","url":"#create-rust-library-for-wasm","depth":2},{"value":"Create Rust library with cargo.","url":"#create-rust-library-with-cargo","depth":3},{"value":"Implement a Rust function that you want to call from JavaScript.","url":"#implement-a-rust-function-that-you-want-to-call-from-javascript","depth":3},{"value":"Wrap the function with wasm-bindgen to export it as Wasm.","url":"#wrap-the-function-with-wasm-bindgen-to-export-it-as-wasm","depth":3},{"value":"Build as Wasm library with wasm-pack","url":"#build-as-wasm-library-with-wasm-pack","depth":3},{"value":"Call the Wasm function from the React app.","url":"#call-the-wasm-function-from-the-react-app","depth":3},{"value":"Advanced topics","url":"#advanced-topics","depth":2},{"value":"Conclusion","url":"#conclusion","depth":2}]},"authorDetails":[{"name":"Tomohiro Kato / @tkat0","avatar":"/static/images/tkat0.jpg","occupation":"Softweare Engineer / Double Bassist","twitter":"https://twitter.com/_tkato_","linkedin":"https://www.linkedin.com/in/tkat0/","github":"https://github.com/tkat0","slug":"default","locale":"en","type":"Authors","readingTime":{"text":"3 min read","minutes":2.33,"time":139800,"words":466},"path":"posts/default","filePath":"authors/default.en.mdx","toc":[{"value":"2021-","url":"#2021-","depth":3},{"value":"2018-2020","url":"#2018-2020","depth":3},{"value":"2014-2017","url":"#2014-2017","depth":3},{"value":"Publications","url":"#publications","depth":3},{"value":"2022","url":"#2022","depth":4},{"value":"2021","url":"#2021","depth":4},{"value":"2020","url":"#2020","depth":4},{"value":"2019","url":"#2019","depth":4},{"value":"2018","url":"#2018","depth":4}],"tags":[]}],"prev":{"title":"2021年の振り返り","date":"2021-12-31T00:00:00.000Z","tags":["yearly-review"],"draft":false,"summary":"2021年の振り返り。","slug":"2021-review","locale":"ja","type":"Blog","readingTime":{"text":"6 min read","minutes":5.595,"time":335700,"words":1119},"path":"posts/2021-review","filePath":"posts/202112/2021-review/2021-review.mdx","toc":[{"value":"転職","url":"#転職","depth":2},{"value":"地方移住","url":"#地方移住","depth":2},{"value":"インプット/アウトプット","url":"#インプットアウトプット","depth":2},{"value":"娘が 3 歳になった","url":"#娘が-3-歳になった","depth":2},{"value":"おわりに","url":"#おわりに","depth":2}]},"next":{"title":"TektonでRustのコンテナビルドする際のmount=type=cacheを有効にする","date":"2022-12-29T00:00:00.000Z","tags":["rust"],"draft":false,"summary":"TektonでRustのDockerfileのビルドを高速化する方法","slug":"how-to-enable-buld-cache-for-rust-in-tekton","locale":"ja","type":"Blog","readingTime":{"text":"3 min read","minutes":2.605,"time":156300,"words":521},"path":"posts/how-to-enable-buld-cache-for-rust-in-tekton","filePath":"posts/202212/how-to-enable-buld-cache-for-rust-in-tekton/index.mdx","toc":[{"value":"Summary","url":"#summary","depth":1},{"value":"Task buildah.yaml の変更","url":"#task-buildahyaml-の変更","depth":1},{"value":"まとめ","url":"#まとめ","depth":1}]}},"__N_SSG":true},"page":"/posts/[...slug]","query":{"slug":["how-to-create-a-react-app-with-rust-and-wasm"]},"buildId":"BbtclRdEExvhlqOtznToX","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>