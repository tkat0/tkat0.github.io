{"pageProps":{"post":{"title":"How to create a React app with Rust and WebAssembly","date":"2022-01-06T00:00:00.000Z","tags":["wasm","rust"],"draft":false,"summary":"In this article, I'll introduce followings through creating simple demo application.","slug":"how-to-create-a-react-app-with-rust-and-wasm","locale":"en","body":{"raw":"\n<TOCInline toc={props.toc} asDisclosure />\n<br />\n\n## Summary\n\nIn this article, I'll introduce followings through creating simple demo application.\n\n- How to create a React app quickly with `create-react-app`.\n- How to create a Wasm library with Rust.\n- How to combile a React app with Wasm library.\n\nYou can see all code in [tkat0/react-wasm-tutorial](https://github.com/tkat0/react-wasm-tutorial).\n\n## What is WebAssembly?\n\n[WebAssembly | MDN](https://developer.mozilla.org/en-US/docs/WebAssembly)\n\n> WebAssembly is a new type of code that can be run in modern web browsers — it is a low-level assembly-like language with a compact binary format that runs with near-native performance and provides languages such as C/C++, C# and Rust with a compilation target so that they can run on the web. It is also designed to run alongside JavaScript, allowing both to work together.\n\n## Create a React App with `create-react-app`\n\nYou can create a React app with [create-react-app](https://github.com/facebook/create-react-app) with one command.\n\n```bash\n$ npx create-react-app react-wasm-tutorial --template typescript\n...\nSuccess! Created react-wasm-tutorial at /Users/tkat0/GitHub/react-wasm-tutorial\n```\n\nThen you can launch the app.\n\n```bash\n$ cd react-wasm-tutorial\n$ npm start\n...\nStarting the development server...\nCompiled successfully!\n\nYou can now view react-wasm-tutorial in the browser.\n\nLocal: http://localhost:3000\nOn Your Network: http://192.168.0.153:3000\n```\n\n![](/static/images/202201/how-to-create-a-react-app-with-rust-and-wasm/before.png)\n\n```ts\nimport and call\nimport React, { useEffect, useState } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <p>\n          Edit <code>src/App.tsx</code> and save to reload.\n        </p>\n        <a\n          className=\"App-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Learn React\n        </a>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n```\n\nToday, we'll add a Wasm library to this react app. I recommend using this for creating a demo like this.\n\n## Create Rust library for Wasm\n\nTo add Wasm to the React app, you need to follow these steps.\n\n- Create Rust library with `cargo`.\n- Implement a Rust function that you want to call from JavaScript.\n- Wrap the function with `wasm-bindgen` to export it as Wasm.\n- Build as Wasm library with `wasm-pack`.\n- Call the Wasm function from the React app.\n\n### Create Rust library with `cargo`.\n\nCreate Rust library with `cargo`.\n\n```bash\n$ cargo new wasm-lib --lib\n     Created library `wasm-lib` package\n```\n\n### Implement a Rust function that you want to call from JavaScript.\n\nSimply, we'll implement `add` function and call it from JavaScript.\n\n```rust\n// lib.rs\n\nfn add(a: i32, b: i32) -> i32 {\n    a + b\n}\n\n#[test]\nfn add_test() {\n    assert_eq!(1 + 1, add(1, 1));\n}\n```\n\nYou can run an unittest like this.\nIn this time, the function is built as native environment not Wasm.\n\n```bash\n$ cd wasm-lib\n$ cargo test\n   Compiling wasm-lib v0.1.0 (/Users/tkat0/GitHub/react-wasm-tutorial/wasm-lib)\n...\nrunning 1 test\ntest add_test ... ok\n```\n\n### Wrap the function with `wasm-bindgen` to export it as Wasm.\n\n[`wasm-bindgen`](https://rustwasm.github.io/wasm-bindgen/introduction.html) is Rust library that facilitate high-level interactions between Wasm and JavaScript.\nFor example, you can call Rust(Wasm) from JavaScript, and vice versa.\n\nTo add `wasm-bindgen` dependency, you need to add it to Cargo.toml.\n\n```diff\n[package]\nname = \"wasm-lib\"\nversion = \"0.1.0\"\nedition = \"2021\"\n\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n\n+[lib]\n+crate-type = [\"cdylib\"]\n\n[dependencies]\n+wasm-bindgen = \"0.2.78\"\n```\n\nThen, Let's wrap the function with `wasm-bindgen`. Notice that only public function can be exported.\n\n(updated Jan 2, 2022: thank you @tardisgallifrey)\n\n```diff\n+use wasm_bindgen::prelude::*;\n\n+#[wasm_bindgen]\npub fn add(a: i32, b: i32) -> i32 {\n    a + b\n}\n\n#[test]\nfn add_test() {\n    assert_eq!(1 + 1, add(1, 1));\n}\n```\n\n### Build as Wasm library with `wasm-pack`\n\nBy using `wasm-bindgen`, you can build Rust as Wasm.\nHowever, To load and run Wasm from JavaScript, You need some JavaScript boilerplate codes (like `WebAssembly.instantiate`).\n\nTo do that, you can use [`wasm-pack`](https://github.com/rustwasm/wasm-pack)!\n\nAt first, you need to install it.\n\n```bash\n$ cd ..\n$ cargo install wasm-pack\n$ wasm-pack --version\nwasm-pack 0.10.2\n```\n\nThen, let's add npm script to call it by `npm run build:wasm`.\n\n```json\n  \"scripts\": {\n    \"start\": \"react-scripts start\",\n    \"build\": \"react-scripts build\",\n+    \"build:wasm\": \"cd wasm-lib && wasm-pack build --target web --out-dir pkg\",\n    \"test\": \"react-scripts test\",\n    \"eject\": \"react-scripts eject\"\n  },\n```\n\nFinally, you can build Rust as Wasm and generate some boilerplate codes.\n\n```\n$ npm run build:wasm\n[INFO]: 🎯  Checking for the Wasm target...\n[INFO]: 🌀  Compiling to Wasm...\n...\n[INFO]: Optimizing wasm binaries with `wasm-opt`...\n[INFO]: ✨   Done in 1.58s\n[INFO]: 📦   Your wasm pkg is ready to publish at /Users/tkat0/GitHub/react-wasm-tutorial/wasm-lib/pkg.\n```\n\nLet's check the output directory generated by `wasm-pack`.\n\nYou noticed `package.json` file was generated.\n\n```bash\n$ tree wasm-lib/pkg\n├── package.json\n├── wasm_lib.d.ts\n├── wasm_lib.js\n├── wasm_lib_bg.wasm\n└── wasm_lib_bg.wasm.d.ts\n```\n\nSo you can install the Wasm library to other project easily.\nLet's install it to the React app.\n\n```bash\n$ npm install ./wasm-lib/pkg\n```\n\nThe library is added like this.\nOfcourse, you can publish the library in npm.\n\n```diff\n  \"dependencies\": {\n    \"@testing-library/jest-dom\": \"^5.16.1\",\n    \"@testing-library/react\": \"^12.1.2\",\n    \"@testing-library/user-event\": \"^13.5.0\",\n    \"@types/jest\": \"^27.4.0\",\n    \"@types/node\": \"^16.11.19\",\n    \"@types/react\": \"^17.0.38\",\n    \"@types/react-dom\": \"^17.0.11\",\n    \"react\": \"^17.0.2\",\n    \"react-dom\": \"^17.0.2\",\n    \"react-scripts\": \"5.0.0\",\n    \"typescript\": \"^4.5.4\",\n+    \"wasm-lib\": \"file:wasm-lib/pkg\",\n    \"web-vitals\": \"^2.1.2\"\n  },\n```\n\n### Call the Wasm function from the React app.\n\nYou can call the Wasm library like this.\n\n```diff\nimport and call\nimport React, { useEffect, useState } from 'react';\n+import init, { add } from \"wasm-lib\";\nimport logo from './logo.svg';\nimport './App.css';\n\nfunction App() {\n+  const [ans, setAns] = useState(0);\n+  useEffect(() => {\n+    init().then(() => {\n+      setAns(add(1, 1));\n+    })\n+  }, [])\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n        <p>\n          Edit <code>src/App.tsx</code> and save to reload.\n        </p>\n+        <p>1 + 1 = {ans}</p>\n        <a\n          className=\"App-link\"\n          href=\"https://reactjs.org\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          Learn React\n        </a>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n```\n\nFinaly, you can see this screen.\n\n![](/static/images/202201/how-to-create-a-react-app-with-rust-and-wasm/after.png)\n\n## Advanced topics\n\nIn this article, I provided the quick introduction for Rust and Wasm.\nTo use Wasm in production, you should think about the following topics.\n\n- Logging\n- Multi-Threading\n- Exception handling\n- Call JavaScript from Rust\n- Call Rust `struct` from JavaScript\n- Testing\n- Cross platform\n\n## Conclusion\n\nIn this article, I introduced followings through creating simple demo application.\n\n- How to create a React app quickly with `create-react-app`.\n- How to create a Wasm library with Rust.\n- How to combile a React app with Wasm library.\n\nBased on this, let's create a React app with Rust!\nThank you for reading to the end.\n","code":"var Component=(()=>{var h=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var s in e)i(a,s,{get:e[s],enumerable:!0})},r=(a,e,s,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of N(e))!u.call(a,l)&&l!==s&&i(a,l,{get:()=>e[l],enumerable:!(c=m(e,l))||c.enumerable});return a};var b=(a,e,s)=>(s=a!=null?h(k(a)):{},r(e||!a||!a.__esModule?i(s,\"default\",{value:a,enumerable:!0}):s,a)),w=a=>r(i({},\"__esModule\",{value:!0}),a);var d=g((I,t)=>{t.exports=_jsx_runtime});var R={};f(R,{default:()=>v,frontmatter:()=>y});var n=b(d()),y={title:\"How to create a React app with Rust and WebAssembly\",date:new Date(16414272e5),slug:\"how-to-create-a-react-app-with-rust-and-wasm\",draft:!1,tags:[\"wasm\",\"rust\"],summary:\"In this article, I'll introduce followings through creating simple demo application.\"};function o(a){let e=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",p:\"p\",ul:\"ul\",li:\"li\",code:\"code\",blockquote:\"blockquote\",pre:\"pre\",div:\"div\",h3:\"h3\"},a.components),{TOCInline:s,Image:c}=e;return c||p(\"Image\",!0),s||p(\"TOCInline\",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s,{toc:a.toc,asDisclosure:!0}),(0,n.jsx)(\"br\",{}),(0,n.jsxs)(e.h2,{id:\"summary\",children:[(0,n.jsx)(e.a,{href:\"#summary\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Summary\"]}),(0,n.jsx)(e.p,{children:\"In this article, I'll introduce followings through creating simple demo application.\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[\"How to create a React app quickly with \",(0,n.jsx)(e.code,{children:\"create-react-app\"}),\".\"]}),(0,n.jsx)(e.li,{children:\"How to create a Wasm library with Rust.\"}),(0,n.jsx)(e.li,{children:\"How to combile a React app with Wasm library.\"})]}),(0,n.jsxs)(e.p,{children:[\"You can see all code in \",(0,n.jsx)(e.a,{href:\"https://github.com/tkat0/react-wasm-tutorial\",children:\"tkat0/react-wasm-tutorial\"}),\".\"]}),(0,n.jsxs)(e.h2,{id:\"what-is-webassembly\",children:[(0,n.jsx)(e.a,{href:\"#what-is-webassembly\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"What is WebAssembly?\"]}),(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/WebAssembly\",children:\"WebAssembly | MDN\"})}),(0,n.jsx)(e.blockquote,{children:(0,n.jsx)(e.p,{children:\"WebAssembly is a new type of code that can be run in modern web browsers \\u2014 it is a low-level assembly-like language with a compact binary format that runs with near-native performance and provides languages such as C/C++, C# and Rust with a compilation target so that they can run on the web. It is also designed to run alongside JavaScript, allowing both to work together.\"})}),(0,n.jsxs)(e.h2,{id:\"create-a-react-app-with-create-react-app\",children:[(0,n.jsx)(e.a,{href:\"#create-a-react-app-with-create-react-app\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Create a React App with \",(0,n.jsx)(e.code,{children:\"create-react-app\"})]}),(0,n.jsxs)(e.p,{children:[\"You can create a React app with \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/create-react-app\",children:\"create-react-app\"}),\" with one command.\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ npx create-react-app react-wasm-tutorial \",(0,n.jsx)(e.span,{className:\"token variable parameter\",children:\"--template\"}),` typescript\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),`.\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Success\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),` Created react-wasm-tutorial at /Users/tkat0/GitHub/react-wasm-tutorial\n`]})]})}),(0,n.jsx)(e.p,{children:\"Then you can launch the app.\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"cd\"}),` react-wasm-tutorial\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),` start\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),`.\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Starting the development server\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),`.\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"Compiled successfully\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"!\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"You can now view react-wasm-tutorial \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"in\"}),` the browser.\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`Local: http://localhost:3000\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`On Your Network: http://192.168.0.153:3000\n`})]})}),(0,n.jsx)(e.div,{children:(0,n.jsx)(c,{alt:\"\",src:\"/static/images/202201/how-to-create-a-react-app-with-rust-and-wasm/before.png\",width:\"1371\",height:\"1074\"})}),(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-ts\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),` and call\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" React\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" useEffect\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" useState \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'react'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" logo \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./logo.svg'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./App.css'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"function\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"App\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"div className\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"App\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"header className\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"App-header\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"img src\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\"logo\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" className\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"App-logo\"'}),\" alt\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"logo\"'}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"p\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          Edit \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),\"code\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),\"src\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"App\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),\"tsx\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"code\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),\" and save to reload\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\".\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"p\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),`a\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          className\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"App-link\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          href\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"https://reactjs.org\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          target\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"_blank\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          rel\",(0,n.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,n.jsx)(e.span,{className:\"token string\",children:'\"noopener noreferrer\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`          Learn React\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"a\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"header\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"<\"}),(0,n.jsx)(e.span,{className:\"token operator\",children:\"/\"}),\"div\",(0,n.jsx)(e.span,{className:\"token operator\",children:\">\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"default\"}),\" App\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"Today, we'll add a Wasm library to this react app. I recommend using this for creating a demo like this.\"}),(0,n.jsxs)(e.h2,{id:\"create-rust-library-for-wasm\",children:[(0,n.jsx)(e.a,{href:\"#create-rust-library-for-wasm\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Create Rust library for Wasm\"]}),(0,n.jsx)(e.p,{children:\"To add Wasm to the React app, you need to follow these steps.\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[\"Create Rust library with \",(0,n.jsx)(e.code,{children:\"cargo\"}),\".\"]}),(0,n.jsx)(e.li,{children:\"Implement a Rust function that you want to call from JavaScript.\"}),(0,n.jsxs)(e.li,{children:[\"Wrap the function with \",(0,n.jsx)(e.code,{children:\"wasm-bindgen\"}),\" to export it as Wasm.\"]}),(0,n.jsxs)(e.li,{children:[\"Build as Wasm library with \",(0,n.jsx)(e.code,{children:\"wasm-pack\"}),\".\"]}),(0,n.jsx)(e.li,{children:\"Call the Wasm function from the React app.\"})]}),(0,n.jsxs)(e.h3,{id:\"create-rust-library-with-cargo\",children:[(0,n.jsx)(e.a,{href:\"#create-rust-library-with-cargo\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Create Rust library with \",(0,n.jsx)(e.code,{children:\"cargo\"}),\".\"]}),(0,n.jsxs)(e.p,{children:[\"Create Rust library with \",(0,n.jsx)(e.code,{children:\"cargo\"}),\".\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"cargo\"}),\" new wasm-lib \",(0,n.jsx)(e.span,{className:\"token variable parameter\",children:\"--lib\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"     Created library \",(0,n.jsxs)(e.span,{className:\"token variable\",children:[(0,n.jsx)(e.span,{className:\"token variable\",children:\"`\"}),\"wasm-lib\",(0,n.jsx)(e.span,{className:\"token variable\",children:\"`\"})]}),` package\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"implement-a-rust-function-that-you-want-to-call-from-javascript\",children:[(0,n.jsx)(e.a,{href:\"#implement-a-rust-function-that-you-want-to-call-from-javascript\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Implement a Rust function that you want to call from JavaScript.\"]}),(0,n.jsxs)(e.p,{children:[\"Simply, we'll implement \",(0,n.jsx)(e.code,{children:\"add\"}),\" function and call it from JavaScript.\"]}),(0,n.jsx)(e.pre,{className:\"language-rust\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-rust\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// lib.rs\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-definition\",children:\"add\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"a\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"i32\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" b\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"i32\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"->\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"i32\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    a \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+\"}),` b\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token attr-name attribute\",children:\"#[test]\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"fn\"}),\" \",(0,n.jsx)(e.span,{className:\"token function function-definition\",children:\"add_test\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property macro\",children:\"assert_eq!\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"+\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"add\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"You can run an unittest like this. In this time, the function is built as native environment not Wasm.\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"cd\"}),` wasm-lib\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"cargo\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"test\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"   Compiling wasm-lib v0.1.0 \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"(\"}),\"/Users/tkat0/GitHub/react-wasm-tutorial/wasm-lib\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),`.\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"running \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),\" \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"test\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"test\"}),\" add_test \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),`. ok\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"wrap-the-function-with-wasm-bindgen-to-export-it-as-wasm\",children:[(0,n.jsx)(e.a,{href:\"#wrap-the-function-with-wasm-bindgen-to-export-it-as-wasm\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Wrap the function with \",(0,n.jsx)(e.code,{children:\"wasm-bindgen\"}),\" to export it as Wasm.\"]}),(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://rustwasm.github.io/wasm-bindgen/introduction.html\",children:(0,n.jsx)(e.code,{children:\"wasm-bindgen\"})}),\" is Rust library that facilitate high-level interactions between Wasm and JavaScript. For example, you can call Rust(Wasm) from JavaScript, and vice versa.\"]}),(0,n.jsxs)(e.p,{children:[\"To add \",(0,n.jsx)(e.code,{children:\"wasm-bindgen\"}),\" dependency, you need to add it to Cargo.toml.\"]}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`[package]\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`name = \"wasm-lib\"\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`version = \"0.1.0\"\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`edition = \"2021\"\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`[lib]\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`crate-type = [\"cdylib\"]\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`[dependencies]\n`}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`wasm-bindgen = \"0.2.78\"\n`})]})})]})}),(0,n.jsxs)(e.p,{children:[\"Then, Let's wrap the function with \",(0,n.jsx)(e.code,{children:\"wasm-bindgen\"}),\". Notice that only public function can be exported.\"]}),(0,n.jsx)(e.p,{children:\"(updated Jan 2, 2022: thank you @tardisgallifrey)\"}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`use wasm_bindgen::prelude::*;\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`\n`]}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`#[wasm_bindgen]\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`pub fn add(a: i32, b: i32) -> i32 {\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   a + b\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`}\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`#[test]\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`fn add_test() {\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   assert_eq!(1 + 1, add(1, 1));\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`}\n`]})]})}),(0,n.jsxs)(e.h3,{id:\"build-as-wasm-library-with-wasm-pack\",children:[(0,n.jsx)(e.a,{href:\"#build-as-wasm-library-with-wasm-pack\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Build as Wasm library with \",(0,n.jsx)(e.code,{children:\"wasm-pack\"})]}),(0,n.jsxs)(e.p,{children:[\"By using \",(0,n.jsx)(e.code,{children:\"wasm-bindgen\"}),\", you can build Rust as Wasm. However, To load and run Wasm from JavaScript, You need some JavaScript boilerplate codes (like \",(0,n.jsx)(e.code,{children:\"WebAssembly.instantiate\"}),\").\"]}),(0,n.jsxs)(e.p,{children:[\"To do that, you can use \",(0,n.jsx)(e.a,{href:\"https://github.com/rustwasm/wasm-pack\",children:(0,n.jsx)(e.code,{children:\"wasm-pack\"})}),\"!\"]}),(0,n.jsx)(e.p,{children:\"At first, you need to install it.\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token builtin class-name\",children:\"cd\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"..\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"cargo\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),` wasm-pack\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ wasm-pack \",(0,n.jsx)(e.span,{className:\"token variable parameter\",children:\"--version\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"wasm-pack \",(0,n.jsx)(e.span,{className:\"token number\",children:\"0.10\"}),`.2\n`]})]})}),(0,n.jsxs)(e.p,{children:[\"Then, let's add npm script to call it by \",(0,n.jsx)(e.code,{children:\"npm run build:wasm\"}),\".\"]}),(0,n.jsx)(e.pre,{className:\"language-json\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-json\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"scripts\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"start\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"react-scripts start\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"build\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"react-scripts build\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"+    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"build:wasm\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"cd wasm-lib && wasm-pack build --target web --out-dir pkg\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"test\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"react-scripts test\"'}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token property\",children:'\"eject\"'}),(0,n.jsx)(e.span,{className:\"token operator\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:'\"react-scripts eject\"'}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),`\n`]})]})}),(0,n.jsx)(e.p,{children:\"Finally, you can build Rust as Wasm and generate some boilerplate codes.\"}),(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`$ npm run build:wasm\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`[INFO]: \\u{1F3AF}  Checking for the Wasm target...\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`[INFO]: \\u{1F300}  Compiling to Wasm...\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`...\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:\"[INFO]: Optimizing wasm binaries with `wasm-opt`...\\n\"}),(0,n.jsx)(e.span,{className:\"code-line\",children:`[INFO]: \\u2728   Done in 1.58s\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`[INFO]: \\u{1F4E6}   Your wasm pkg is ready to publish at /Users/tkat0/GitHub/react-wasm-tutorial/wasm-lib/pkg.\n`})]})}),(0,n.jsxs)(e.p,{children:[\"Let's check the output directory generated by \",(0,n.jsx)(e.code,{children:\"wasm-pack\"}),\".\"]}),(0,n.jsxs)(e.p,{children:[\"You noticed \",(0,n.jsx)(e.code,{children:\"package.json\"}),\" file was generated.\"]}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-bash\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`$ tree wasm-lib/pkg\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 package.json\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 wasm_lib.d.ts\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 wasm_lib.js\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u251C\\u2500\\u2500 wasm_lib_bg.wasm\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\\u2514\\u2500\\u2500 wasm_lib_bg.wasm.d.ts\n`})]})}),(0,n.jsx)(e.p,{children:\"So you can install the Wasm library to other project easily. Let's install it to the React app.\"}),(0,n.jsx)(e.pre,{className:\"language-bash\",children:(0,n.jsx)(e.code,{className:\"code-highlight language-bash\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"$ \",(0,n.jsx)(e.span,{className:\"token function\",children:\"npm\"}),\" \",(0,n.jsx)(e.span,{className:\"token function\",children:\"install\"}),` ./wasm-lib/pkg\n`]})})}),(0,n.jsx)(e.p,{children:\"The library is added like this. Ofcourse, you can publish the library in npm.\"}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` \"dependencies\": {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@testing-library/jest-dom\": \"^5.16.1\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@testing-library/react\": \"^12.1.2\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@testing-library/user-event\": \"^13.5.0\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@types/jest\": \"^27.4.0\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@types/node\": \"^16.11.19\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@types/react\": \"^17.0.38\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"@types/react-dom\": \"^17.0.11\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"react\": \"^17.0.2\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"react-dom\": \"^17.0.2\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"react-scripts\": \"5.0.0\",\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"typescript\": \"^4.5.4\",\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`    \"wasm-lib\": \"file:wasm-lib/pkg\",\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   \"web-vitals\": \"^2.1.2\"\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` },\n`})]})})]})}),(0,n.jsxs)(e.h3,{id:\"call-the-wasm-function-from-the-react-app\",children:[(0,n.jsx)(e.a,{href:\"#call-the-wasm-function-from-the-react-app\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Call the Wasm function from the React app.\"]}),(0,n.jsx)(e.p,{children:\"You can call the Wasm library like this.\"}),(0,n.jsx)(e.pre,{className:\"language-diff\",children:(0,n.jsxs)(e.code,{className:\"code-highlight language-diff\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`import and call\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`import React, { useEffect, useState } from 'react';\n`}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`import init, { add } from \"wasm-lib\";\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`import logo from './logo.svg';\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`import './App.css';\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`function App() {\n`}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`  const [ans, setAns] = useState(0);\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`  useEffect(() => {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`    init().then(() => {\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`      setAns(add(1, 1));\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`    })\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line inserted\",children:(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`  }, [])\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` return (\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   <div className=\"App\">\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`     <header className=\"App-header\">\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       <img src={logo} className=\"App-logo\" alt=\"logo\" />\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       <p>\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`         Edit <code>src/App.tsx</code> and save to reload.\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       </p>\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line inserted\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token inserted inserted-sign\",children:[(0,n.jsx)(e.span,{className:\"token inserted prefix\",children:\"+\"}),(0,n.jsx)(e.span,{className:\"token line\",children:`        <p>1 + 1 = {ans}</p>\n`})]})]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token inserted inserted-sign\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       <a\n`})]})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`         className=\"App-link\"\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`         href=\"https://reactjs.org\"\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`         target=\"_blank\"\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`         rel=\"noopener noreferrer\"\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       >\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`         Learn React\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`       </a>\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`     </header>\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:`   </div>\n`})]})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsxs)(e.span,{className:\"token unchanged\",children:[(0,n.jsx)(e.span,{className:\"token line\"}),(0,n.jsx)(e.span,{className:\"token unchanged prefix\",children:\" \"}),(0,n.jsx)(e.span,{className:\"token line\",children:` );\n`})]})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token unchanged\",children:(0,n.jsx)(e.span,{className:\"token line\"})}),`}\n`]}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`export default App;\n`})]})}),(0,n.jsx)(e.p,{children:\"Finaly, you can see this screen.\"}),(0,n.jsx)(e.div,{children:(0,n.jsx)(c,{alt:\"\",src:\"/static/images/202201/how-to-create-a-react-app-with-rust-and-wasm/after.png\",width:\"1331\",height:\"1226\"})}),(0,n.jsxs)(e.h2,{id:\"advanced-topics\",children:[(0,n.jsx)(e.a,{href:\"#advanced-topics\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Advanced topics\"]}),(0,n.jsx)(e.p,{children:\"In this article, I provided the quick introduction for Rust and Wasm. To use Wasm in production, you should think about the following topics.\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsx)(e.li,{children:\"Logging\"}),(0,n.jsx)(e.li,{children:\"Multi-Threading\"}),(0,n.jsx)(e.li,{children:\"Exception handling\"}),(0,n.jsx)(e.li,{children:\"Call JavaScript from Rust\"}),(0,n.jsxs)(e.li,{children:[\"Call Rust \",(0,n.jsx)(e.code,{children:\"struct\"}),\" from JavaScript\"]}),(0,n.jsx)(e.li,{children:\"Testing\"}),(0,n.jsx)(e.li,{children:\"Cross platform\"})]}),(0,n.jsxs)(e.h2,{id:\"conclusion\",children:[(0,n.jsx)(e.a,{href:\"#conclusion\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),(0,n.jsx)(e.p,{children:\"In this article, I introduced followings through creating simple demo application.\"}),(0,n.jsxs)(e.ul,{children:[(0,n.jsxs)(e.li,{children:[\"How to create a React app quickly with \",(0,n.jsx)(e.code,{children:\"create-react-app\"}),\".\"]}),(0,n.jsx)(e.li,{children:\"How to create a Wasm library with Rust.\"}),(0,n.jsx)(e.li,{children:\"How to combile a React app with Wasm library.\"})]}),(0,n.jsx)(e.p,{children:\"Based on this, let's create a React app with Rust! Thank you for reading to the end.\"})]})}function x(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(o,a)})):o(a)}var v=x;function p(a,e){throw new Error(\"Expected \"+(e?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return w(R);})();\n;return Component;"},"_id":"posts/202201/how-to-create-a-react-app-with-rust-and-wasm/index.mdx","_raw":{"sourceFilePath":"posts/202201/how-to-create-a-react-app-with-rust-and-wasm/index.mdx","sourceFileName":"index.mdx","sourceFileDir":"posts/202201/how-to-create-a-react-app-with-rust-and-wasm","contentType":"mdx","flattenedPath":"posts/202201/how-to-create-a-react-app-with-rust-and-wasm"},"type":"Blog","readingTime":{"text":"6 min read","minutes":5.25,"time":315000,"words":1050},"path":"posts/how-to-create-a-react-app-with-rust-and-wasm","filePath":"posts/202201/how-to-create-a-react-app-with-rust-and-wasm/index.mdx","toc":[{"value":"Summary","url":"#summary","depth":2},{"value":"What is WebAssembly?","url":"#what-is-webassembly","depth":2},{"value":"Create a React App with create-react-app","url":"#create-a-react-app-with-create-react-app","depth":2},{"value":"Create Rust library for Wasm","url":"#create-rust-library-for-wasm","depth":2},{"value":"Create Rust library with cargo.","url":"#create-rust-library-with-cargo","depth":3},{"value":"Implement a Rust function that you want to call from JavaScript.","url":"#implement-a-rust-function-that-you-want-to-call-from-javascript","depth":3},{"value":"Wrap the function with wasm-bindgen to export it as Wasm.","url":"#wrap-the-function-with-wasm-bindgen-to-export-it-as-wasm","depth":3},{"value":"Build as Wasm library with wasm-pack","url":"#build-as-wasm-library-with-wasm-pack","depth":3},{"value":"Call the Wasm function from the React app.","url":"#call-the-wasm-function-from-the-react-app","depth":3},{"value":"Advanced topics","url":"#advanced-topics","depth":2},{"value":"Conclusion","url":"#conclusion","depth":2}]},"authorDetails":[{"name":"Tomohiro Kato / @tkat0","avatar":"/static/images/tkat0.jpg","occupation":"Softweare Engineer / Double Bassist","twitter":"https://twitter.com/_tkato_","linkedin":"https://www.linkedin.com/in/tkat0/","github":"https://github.com/tkat0","slug":"default","locale":"en","type":"Authors","readingTime":{"text":"3 min read","minutes":2.33,"time":139800,"words":466},"path":"posts/default","filePath":"authors/default.en.mdx","toc":[{"value":"2021-","url":"#2021-","depth":3},{"value":"2018-2020","url":"#2018-2020","depth":3},{"value":"2014-2017","url":"#2014-2017","depth":3},{"value":"Publications","url":"#publications","depth":3},{"value":"2022","url":"#2022","depth":4},{"value":"2021","url":"#2021","depth":4},{"value":"2020","url":"#2020","depth":4},{"value":"2019","url":"#2019","depth":4},{"value":"2018","url":"#2018","depth":4}],"tags":[]}],"prev":{"title":"2021年の振り返り","date":"2021-12-31T00:00:00.000Z","tags":["yearly-review"],"draft":false,"summary":"2021年の振り返り。","slug":"2021-review","locale":"en","type":"Blog","readingTime":{"text":"6 min read","minutes":5.595,"time":335700,"words":1119},"path":"posts/2021-review","filePath":"posts/202112/2021-review/2021-review.mdx","toc":[{"value":"転職","url":"#転職","depth":2},{"value":"地方移住","url":"#地方移住","depth":2},{"value":"インプット/アウトプット","url":"#インプットアウトプット","depth":2},{"value":"娘が 3 歳になった","url":"#娘が-3-歳になった","depth":2},{"value":"おわりに","url":"#おわりに","depth":2}]},"next":{"title":"TektonでRustのコンテナビルドする際のmount=type=cacheを有効にする","date":"2022-12-29T00:00:00.000Z","tags":["rust"],"draft":false,"summary":"TektonでRustのDockerfileのビルドを高速化する方法","slug":"how-to-enable-buld-cache-for-rust-in-tekton","locale":"en","type":"Blog","readingTime":{"text":"3 min read","minutes":2.605,"time":156300,"words":521},"path":"posts/how-to-enable-buld-cache-for-rust-in-tekton","filePath":"posts/202212/how-to-enable-buld-cache-for-rust-in-tekton/index.mdx","toc":[{"value":"Summary","url":"#summary","depth":1},{"value":"Task buildah.yaml の変更","url":"#task-buildahyaml-の変更","depth":1},{"value":"まとめ","url":"#まとめ","depth":1}]}},"__N_SSG":true}